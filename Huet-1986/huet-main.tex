%!TEX root = huet-1986-pal.tex
%\usepackage[dotinlabels]{titletoc}
%\titlelabel{{\thetitle}.\quad}
%\input{../helpers/psu-plain-titles.tex}
%\input{../helpers/psu-sc-headers.tex}
%\input{../helpers/fix-revtex-12.tex}
%\DeclareSymbolFont{CMlargesymbols}{OMX}{cmex}{m}{n}
%\DeclareMathSymbol{\sum}{\mathop}{CMlargesymbols}{"50}

\usepackage[papersize={6.6in, 10.0in}, left=.5in, right=.5in, top=.6in, bottom=.9in]{geometry}
\linespread{1.05}
\sloppy
\raggedbottom

\pagestyle{plain}
\usepackage{mathpartir}
\usepackage{stmaryrd}
\usepackage{mathtools}
\usepackage{tikz-cd}
\usepackage{microtype}
\usepackage{enumitem}
\usepackage{nccmath}
\usetikzlibrary {arrows.meta,bending,positioning}
\usepackage{bussproofs}

\newcommand{\mprime}{\ensuremath{^\prime}}

%\usepackage{fdsymbol}

% these include amsmath and that can cause trouble in older docs.
\input{../helpers/cmrsum}
\input{../helpers/fix-underbrace.tex}

% some nicer symbols
\input{../helpers/matha-symbols.tex}

\usepackage[tiny]{titlesec}
\titleformat{\section}
  {\normalfont\bfseries}
  {\thesection.}
  {.5em}
  {}

\usepackage{cite}

% make sure there is enough TOC for reasonable pdf bookmarks.
\setcounter{tocdepth}{3}
\usepackage{amsthm}

\theoremstyle{definition}


\usepackage[colorlinks=true
,breaklinks=true
,urlcolor=blue
,anchorcolor=blue
,citecolor=blue
,filecolor=blue
,linkcolor=blue
,menucolor=blue
,linktocpage=true]{hyperref}
\hypersetup{
bookmarksopen=true,
bookmarksnumbered=true,
bookmarksopenlevel=10,
pdfencoding=auto, psdextra
}

\date{}
\def\deqd{\mathrel{\cdot\!\!=\!\!\cdot}}
\def\trans{\Phi}
\def\mm{\Vdash}
\def\kxa{\kappa_{x \in A}}
\def\prAB{\pi_{A,B}}
\def\prpAB{\pi'_{A,B}}
\def\pr#1{\pi_{#1}}
\def\prp#1{\pi'_{#1}}
\def\to{\longrightarrow}
\def\xto#1{\xrightarrow{\kern.6em #1 \kern.6em}}
\def\sxto#1{\xrightarrow{\kern.3em #1 \kern.3em}}
\def\ent{\vdash}
\def\eent{\Vdash}
\def\entt{\models}
\def\imp{\shortrightarrow}
\def\iff{\leftrightarrow}
\def\from{\Leftarrow}
\def\impl{\Rightarrow}
\def\union{\cup}
\def\fexp#1#2{#1^{#2}}
\def\fexpBA{\fexp{B}{A}}
\def\inc{\subseteq}
\def\Sub{\mathop{\rm sub}}
\def\dom{\mathop{\rm dom}}
\def\cod{\mathop{\rm cod}}
\def\ker{\mathop{\rm ker}}
\def\Ker{\mathop{\rm Ker}}
\def\cha{\mathop{\rm char}}
\def\id{{\mathrm 1}}
\def\res{\!\upharpoonleft\!}
\def\ffam{\varphi}
\def\comp{\circ}
\def\bbone{\mathbb 1}
\def\one{1}
\def\zeromap{0}
\def\bbzero{{\mathbb O}}
\def\ccc{{c.c.c.}}
\def\ev{\varepsilon}
\def\ebc{\varepsilon_{BC}}
\def\evBA{\varepsilon_{B,A}}
\def\L{\Lambda}
\def\OM{\Omega}

\def\l{\lambda}
\def\lamC{\l\text{-{\bf{\kern 0.2pt}calc}}}
\def\lx{\lambda_x}
\def\ly{\lambda_y}
\def\lu{\lambda_u}
\def\lv{\lambda_v}
\def\lz{\lambda_z}
\def\lxa{\l_{x \in A}}
\def\subX{\ensuremath{_\text{X}}}
\def\lm#1.#2{\lambda#1.\, #2}
\def\br#1{[\, #1 \, ]}
\def\V{V}
\def\U{U}
\def\D{D}
\def\cart{\text{\bf Cart}}
\def\C{\mathcal C}
\def\S{\mathcal S}
\def\lxy{\l x\, \l y . \,}
\def\lmm#1#2.#3{\l #1\, \l #2 . \, #3}
\def\sss{(*\!*\!*)}
\def\ss{(**)}
\def\ssn{(**_n)}
\def\scop{\S^{\C^{op}}}
\def\sland{\wedge}
\def\PU{\mathcal P U}
\def\P{\mathcal P}
\def\UU{(U\to U)}
\def\BA{B \to A}
\def\AB{A \to B}
\def\calA{{\cal A}}
\def\calB{{\cal B}}
\def\cI{{I}}
\def\cS{{S}}
\def\cK{{K}}
\def\cIA{\cI_{A}}
\def\cKAB{\cK_{A,B}}
\def\cSABC{\cS_{A,B,C}}
\def\la{\langle}
\def\ra{\rangle}
\def\bracket#1{\la #1 \ra}
\def\app{\mathop{{}^\wr}\kern-.8pt}
\def\schon{Sch\"onfinkel}
\def\nat{\mathbb N}
\def\pf{\varphi}

\newcommand{\be}{\begin{equation}}
\newcommand{\ee}{\end{equation}}
\newcommand{\bes}{\begin{equation*}}
\newcommand{\ees}{\end{equation*}}

\newcommand{\fcat}[1]{{\mathbf {#1}}} 
\newcommand{\Cat}{\fcat{Cat}}
\newcommand{\Set}{\fcat{Sets}}
\newcommand{\Lang}{\fcat{Lang}}
\newcommand{\grph}{\fcat{Grph}}
\newcommand{\AC}{\fcat{A}}
\newcommand{\CC}{\fcat{Categ}}
\newcommand{\ZC}{\fcat{Z}}
\def\LC{\fcat{L}}
\def\MC{\fcat{M}}
\def\TC{\fcat{T}}
\def\FC{\fcat{F}}
\DeclareMathOperator{\Hom}{{Hom}}
\def\comp#1#2{#1 \mathbin{;} #2}
\def\Id{\text{\it Id}}
\def\Idl{\text{\it Idl}}
\def\Idr{\text{\it Idr}}
\def\Assoc{\text{\it Assoc}}

\newcommand{\iso}{\cong}                % Isomorphism
\newcommand{\eqv}{\simeq}               % Equivalence
\newcommand{\sub}{\subseteq}            % Subset (possibly not proper)

\usepackage{amsmath,amsthm}

\theoremstyle{definition}

\newtheorem{thm}{Theorem}[section]
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{defn}[thm]{Definition}
\newtheorem{example}[thm]{Example}
\newtheorem{remark}[thm]{Remark}
\newtheorem{note}[thm]{Note}

% makes "=" with "x" under it
\makeatletter
\DeclareRobustCommand{\eqx}{\mathrel{\mathpalette\eq@{X}}}
\DeclareRobustCommand{\eqlx}{\mathrel{\mathpalette\eq@{x}}}
\DeclareRobustCommand{\eqy}{\mathrel{\mathpalette\eq@{Y}}}
\DeclareRobustCommand{\eqxx}{\mathrel{\mathpalette\eq@{X \union \{x\}}}}
\DeclareRobustCommand{\eqtx}{\mathrel{\mathpalette\eq@{\trans(X)}}}
\newcommand{\eq@}[2]{%
  \vtop{\offinterlineskip
    \ialign{\hfil##\hfil\cr
      $\m@th#1=$\cr % top
      \noalign{\sbox\z@{$\m@th#1\mkern0mu$}\kern-\wd\z@}
      $\m@th\alexey@demote{#1}#2$\cr
    }%
  }%
}
\DeclareRobustCommand{\eqdX}{\mathrel{\mathpalette\eqd@{X}}}
\DeclareRobustCommand{\eqdx}{\mathrel{\mathpalette\eqd@{x}}}
\newcommand{\eqd@}[2]{%
  \vtop{\offinterlineskip
    \ialign{\hfil##\hfil\cr
      $\m@th#1\deqd$\cr % top
      \noalign{\sbox\z@{$\m@th#1\mkern0mu$}\kern-\wd\z@}
      $\m@th\alexey@demote{#1}#2$\cr
    }%
  }%
}
\newcommand{\alexey@demote}[1]{%
  \ifx#1\displaystyle\scriptstyle\else
  \ifx#1\textstyle\scriptstyle\else
  \scriptscriptstyle\fi\fi
}

\makeatother

% footnote tricks
\usepackage{footmisc}
%\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\makeatletter
\let\original@footnotemark\footnotemark
\newcommand{\align@footnotemark}{%
  \ifmeasuring@
    \chardef\@tempfn=\value{footnote}%
    \original@footnotemark
    \setcounter{footnote}{\@tempfn}%
  \else
    \iffirstchoice@
      \original@footnotemark
    \fi
  \fi}
\pretocmd{\start@align}{\let\footnotemark\align@footnotemark}{}{}
\makeatother

\makeatletter
\newcommand*\dotop{\mathpalette\bigcdot@{.6}}
\newcommand*\bigcdot@[2]{\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

\begin{document}

\title{\large Cartesian Closed Categories and Lambda Calculus}
\author{\normalsize G\'erad Huet%
\footnote{This is a remake of the paper {\em Cartesian Closed Categories and Lambda Calculus}
originally published 1986. This version of the paper was typed out in 2025 by Pete Su.} 
\\ \\ \small INRIA}


\maketitle

\noindent
The purpose of these notes is to propose an equational framework for the formalization, and
ultimately the mechanization, of categorical reasoning. This framework is explained by way of
example in the axiomatization of cartesian closed categories. The relationship with intuitionistic
sequent calculus and lambda calculus is explained.

\section{The Equational Nature of Category Theory}%

Category theory reasoning proves equality of arrow compositions, as determined by diagrams. The
corresponding equality is given in the model, i.e. in the category under consideration. But the
proofs do not appeal to any particular property of the equality relation, such as extensionality. All
we assume is that equality is a congruence with respect to the arrow operators.

However we are not dealing with simple homogeneous equational theories, but with typed
theories. For instance, every arrow is equipped with its type $f : A \to B$. Here $A$ and $B$ are
expressions denoting objects. These expressions are formed in turn by functorial operations and
constants representing distinguished objects. The object terms can be considered untyped only
within the context of one category. As soon as several categories are concerned, we must type
the objects as well, with sorts representing categories. We thus have implicitly two levels of type
structure.

The main difference between typed theories and untyped ones is that in untyped (homogeneous)
theories one usually assume the domain of discourse to be non-empty. For instance, a first-order
model has a non-empty carrier. Thus a variable always denotes something. In typed theories one
does not usually make this restriction. Thus we do not want to impose the $\Hom$-set $A\to B$ to be
always non-empty for every $A$ and $B$ in the category, in the same way that we want to consider
partial orderings.

This has an unfortunate consequence: the law of substitution of equals for equals does not hold
whenever one substitutes an expression containing a variable universally quantified over an empty
domain by an expression not containing this variable, since we replace something that does not
denote by something which may denote. For instance, 
consider the signature $H : A \to B$, with $T:B$, $F:B$,
and the equations $H(x) = T$ and $H(x) = F$. These equations are valid in the model
where $A$ is the empty set, $H$ is the empty function,
and $B$ is a set of two elements $\{0,1\}$, with $T$
interpreted as $\one$ and $F$ interpreted as $0$. 
In this model we do not have $T= F$. We shall have to
keep this problem in mind in the following.

\subsection{The General Formalism}

We have thus a formalism with four levels. At the first level, we have the alphabet of categories
$\Cat= \{\AC,...,\ZC\}$. At the second level, we have the alphabet of object operators. Every category
is defined over an object alphabet $\Phi$ of operators given with an arity. $\Phi$ is where the (internal)
functors live. We then form sequents by pairs of terms $ M \imp N$, with $M,N \in \TC(\Phi,V)$. $V$ is a set
of variables denoting arbitrary objects of the category. At the third level we have the alphabet $\Sigma$
of arrow operators. An operator from $\Sigma$ is given as an inference rule of the form:
\[
S_1,\dots,S_n \ent S
\]
where the $S_i$’s and $S$ are sequents. Such an operator is polymorphic over the free variables of the
$S_i$’s and $S$, which are supposed to be universally quantified over the inference rule. Such operators
are familiar from logic, either as schematic inference rules, or as (definite) Horn clauses. Of course
the arrows with domain $M$ and codomain $N$ are represented as terms over $\TC(\Sigma,F)$ of type $M \imp N$.
Here $F$ is a set of arrow variables, indexed by sequents $A\imp B$. Finally, at the fourth level we have
the proofs of arrow equalities. The alphabet consists of a set $\cal R$ of conditional rules of the form:
\[
f_{1} =_{S_{1}} g_{1}, \dots, f_{n} =_{S_{n}} g_{n}\, \entt \, f =_{S} g
\]
Here the $f$’s and $g$ are arrow expressions of type $S$, and similarly for the $f_i$’s and $g_i$’s. 
All object and arrow variables appearing in the rule are supposed to be universally 
quantified in front of the rule.

\subsection{A Simplified Formalism}
From now on, we shall assume that we are in one category of discourse which is left implicit. We shall therefore deal only with the last three levels. Furthermore, we shall assume that the only proof rules are:
\begin{align*}
\text {{\it Refl}:}\, f&=_{A \rightarrow B} f \\
\text {{\it Trans}:}\, f&=_{A \rightarrow B} g, \, g=_{A \rightarrow B} h\, 
\models\, f=_{A \rightarrow B} h \\
\text {{\it Sym}:}\, f&=_{A \rightarrow B} g \, \models\, g=_{A \rightarrow B} f
\end{align*}
together with the rules stating that $=$ is a congruence with respect to the operators in $\Sigma$, all other rules being given by simple identities, i.e. by rules with an empty set of premisses ($n=0$).

The further simplification comes from the realization that we are not really obliged to completely specify the types of all variable arrows and equalities, since there is a lot of redundancy. This fact exploits unification, and the following:

\subsubsection*{Meta-theorem}

Let $\Sigma$ be an arbitrary arrow signature, and $E$ be an arbitrary term formed by operators from $\Sigma$ and untyped variables. If there is an assignment of types to the variables of $E$ that makes $E$ well-typed with respect to $\Sigma$, there is a most general such assignment, independent in each variable, and furthermore the resulting type of $E$ is most general. Here ``more general'' means ``has as substitution instance''. We call this assignment, together with the resulting type of $E$, the principal typing of $E$. More generally, for every type sequent $S$, if there is an assignment of types which makes $E$ of a type some instance of $S$, there is a principal such assignment.

The meta-theorem above is most useful. It permits to omit most of the types. When we write
an equation $E= E'$, we shall implicitly refer to the principal typing giving $E$ and $E'$ 
the same type $A\to B$. So from now on, all equations in $\mathcal R$ 
are written without type, the types being implicit
from the principality assumption.

\subsection{The initial theory Categ}

We are now ready to start Category Theory. The initial theory $\CC$ has $\Phi = \emptyset$,
and $\Sigma = \{\Id,\comp{\_}{\_} \}$, given with respective signatures:
\begin{align*}
\Id &: A \to A\\
\comp{\_}{\_}&: A \to B, B \to C \ent A \to C
\end{align*}
The notation ``$\comp{\_}{\_}$'' means that we use the infix notation $\comp{f}{g}$
for the composition of arrows $f$ and $g$. We can read ``$\!f$ then $g$'',
and follow arrow composition along diagrams with semi-colon as
concatenation of the labels. But since more people are accustomed to the standard set-theoretic
composition notation, we shall below use $g\circ f$ as an abbreviation for $\comp{f}{g}$.

The equations $\mathcal R$ of $\CC$ are simply the laws of a monoıd:
\begin{align*}
\Assoc &: (f \circ g) \circ h = f \circ (g \circ h)\\
\Idl &: \Id \circ f = f\\
\Idr &: f \circ \Id = f
\end{align*}

It is to be noted that the identification of the Hom-set symbol $\to$ with the sequent entailment
arrow is not fortuitious. Actually $\Id$ and $\comp{\_}{\_}$
are well-known inference rules of intuitionistic propositional calculus.
However, the logic is quite poor at this stage: we have no propositional connective
whatsoever, just the basic mechanism for sequent composition, 
stating that entailment is reflexive
and transitive. The rules of $\mathcal R$, considered as a left-to-right
rewriting system, define a normal form
on the sequent calculus proofs, i.e. on the arrow expressions

Before we embark on more complicated theories, let us give a recipe on how to cook an equational
presentation from a categorical statement.

\subsection{What the Category Theorists Don’t Say}


Open a standard book on category theory, and consider a typical categorical definition.
It usually reads: ``Mumble, such that the following diagram commutes.''
Similarly, a typical categorical result states: 
``If $\,\text{\it diagram}_1$ and ... and $\text{\it diagram}_n$ commute, then {\it diagram}
commutes.''
The first step in understanding such statements is to determine exactly their universality:
what is exactly quantified, universally or existentially, what depends on what,
what are exactly the parameters of the (frequent) unicity condition.
The next step is to realize that the diagram states conditional
equalities on arrows, and that it is enough to state the equalities
of the inside diagrams in order to get all equalities.

A uniform compilation of such statements as an equational theory proceeds as follows.
First write completely explicitly the quantification prefix of the statement, in two
lines, one for the objects and one for the arrows. Then Skolemize the statement
independently in the first and the second line. That is, for every existentially
quantified variable $x$ following the universally quantified $y_1, \ldots y_n$, introduce
a new $n$-ary operator $X$ and substitute throughout $x$ by $X\left(y_1, \ldots
y_n\right)$. The Skolemization of the object variables determines $\Phi$. The
Skolemization of the second line, together with the types implicit from the diagram
determine $\Sigma$. Finally, following arrows around the inner diagrams determines
$\mathcal{R}$. This concerns the existential part. For the unicity part, proceed as
follows. Let $f$ be the arrow whose unicity is asserted. The existence part provided by
Skolemization an $F\left(g_1, \ldots, g_k\right)$ in place of $f$. Write a supplementary
arrow $h$ on the diagram parallel to $f$, and use the commutation conditions to eliminate
all the $g_i$ 's as $G_i(h)$. Add an extra equation $F\left(G_1(h), \ldots,
G_k(h)\right)=h$.

Once we have convinced ourselves that the category theoretic statements and proofs are of
an equational nature, we may ask: why do the category theorists use diagrams at all? The
reason is that diagram chasing is a sophisticated way of doing complex equality reasoning,
using several equations simultaneously, on a shared data structure (the graph underlying
the diagram). So diagrammatic reasoning may be considered a good tool for high level
equational reasoning. On the other hand, equality reasoning techniques such as rewrite
rules analysis is good for mechanical implementation, and this is why we stress here the
equational theories hidden behind the diagrams. 

\bigskip\noindent
{\bf Remark}. Let us finally remark that more
general categorical concepts than the simple universal statements that we shall now
consider may force us to generalize the basic formalism. For instance, more complicated
limit constructions such as pullbacks force the dependence of objects on arrows. The
Skolemization cannot be eﬀected separately on the object and the arrow variables, and we
shall have to place ourselves in a more complicated type theory with dependent types.












