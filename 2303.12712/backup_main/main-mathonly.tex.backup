\documentclass[11pt]{article}

\usepackage[
  margin=1.5cm,
  includefoot,
  footskip=30pt,
]{geometry}
\counterwithin{figure}{section}
\usepackage{tikz}
\usepackage{amsmath,amssymb}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{xspace}
\usepackage[noend]{algorithmic}
\usepackage[ruled,vlined]{algorithm2e}
\usepackage{url}
\usepackage{makeidx}
\usepackage{enumerate}
\usepackage{epstopdf}
\usepackage{booktabs}
\usepackage{color}
\usepackage[utf8]{inputenc}
\usepackage{thm-restate}
\usepackage{scalerel,stackengine}
\usepackage[shortlabels]{enumitem}
\usepackage{xr}
\usepackage{fancyvrb}
\usepackage{xcolor}
\usepackage{bold-extra}
\usepackage[width=474.18663pt]{caption}
\usepackage{subfigure}
%\usepackage{subcaption}
\usepackage[most]{tcolorbox}
\usepackage{fvextra}
\usepackage{minted}
\usepackage{float}
\usepackage{alltt}
\usepackage{soul}
\usepackage{fancyvrb}
\usepackage{multirow}
\usepackage[final]{hyperref}
\usepackage[bottom]{footmisc}
\usemintedstyle{vs}


\newcommand{\mscomment}[1]{\textcolor{blue}{\textbf{[#1 --Seb]}}}
\newcommand{\DVcom}[1]{\textcolor{red}{[DV3: #1]}}
\newcommand{\yintat}[1]{\textcolor{red}{[YinTat: #1]}}
\newcommand{\varun}[1]{\textcolor{red}{[VC: #1]}}
\newcommand{\hamid}[1]{\textcolor{red}{[HP: #1]}}
\newcommand{\ronen}[1]{\textcolor{red}{[RE: #1]}}
\newcommand{\johannes}[1]{\textcolor{red}{[JG: #1]}}
\newcommand{\DV}{DV3\xspace}

\usepackage{tikz}
\usetikzlibrary{shapes,calc,positioning}

\global\setlength{\fboxsep}{0pt}
%\global\setlength{\textwidth}{474.18663pt}


\tcbset{
  aibox/.style={
    width=474.18663pt,
    top=10pt,
    colback=white,
    colframe=black,
    colbacktitle=black,
    enhanced,
    center,
    attach boxed title to top left={yshift=-0.1in,xshift=0.15in},
    boxed title style={boxrule=0pt,colframe=white,},
  }
}
\newtcolorbox{AIbox}[2][]{aibox,title=#2,#1}


\definecolor{aigreen}{RGB}{210,244,211} 
\newcommand{\lightgreen}[1]{\fcolorbox{aigreen}{aigreen}{\parbox{\linewidth}{#1}}}
\sethlcolor{aigreen}

\definecolor{aired}{RGB}{244,210,211} 
\newcommand{\lightred}[1]{\colorbox{aired}{\parbox{\linewidth}{#1}}}


\newtcbox{\mybox}[1][green]{on line,
arc=0pt,outer arc=0pt,colback=#1!10!white,colframe=#1!50!black,
boxsep=0pt,left=0pt,right=0pt,top=0pt,bottom=0pt,
boxrule=0pt,bottomrule=0pt,toprule=0pt}
\begin{document}
\include{contents/unicorn}



\maketitle

\section{Mathematical abilities}
\label{sec:math}
In this section we begin to assess how well \DV \ can express mathematical concepts, solve mathematical problems and apply quantitative reasoning when facing problems that require mathematical thinking and model-building. We demonstrate that \DV \ represents a jump in that arena too with respect to previous LLMs, even when compared to specially fine-tuned for math models such a Minerva. As it seems, however, \DV \ is still quite far from the level of experts, and does not have the capacity required to conduct mathematical research. \\

The reader is called into caution that interpreting the results in this section correctly is a difficult exercise: As we will see, DV3 can answer difficult (indeed, competitive) high-school level math questions, and can sometimes engage in meaningful conversation around advanced math topics. Yet, it can also make very basic mistakes and occasionally produce incoherent and nonsensical output which may be interpreted as a lack of {\em true understanding}. Its mathematical knowledge and abilities can depend on the context in a seemingly arbitrary way. \\

While it is tempting to evaluate \DV's mathematical abilities using the same criteria used to assess human abilities, in light of the above, this will not provide a complete picture of the model's abilities. In order to really understand the model's capabilities, we will need to break down "mathematical abilities" into various sub-components and evaluate \DV's performance in each area. Throughout this section, we'll use specific examples and discussions to illustrate the model's strengths and weaknesses, and attempt to pinpoint the possible underlying reasons for these discrepancies. \\

To give the reader a first impression regarding \DV's performance in mathematical problem solving, consider the following example\footnote{The question in the example was written by the authors rather than being taken from an online resource.}
\begin{figure}[H]
\begin{AIbox}{\DV~vs ChatGPT}
{\bf Prompt:} {\scriptsize
Within the duration of one year, a rabbit population first multiplies itself by a factor $a$ and on the last day of the year $b$ rabbits are taken by humans for adoption. Supposing that on first day of the first year there are $x$ rabbits, we know that exactly 3 years afterwards there will be a population of $27x - 26$ rabbits. What are the values of $a$ and $b$?
}\\\ \\
\parbox[t]{0.5\linewidth}{{\bf \DV:}\\
\scriptsize
Let's call the rabbit population after one year $y$. We know that $y = ax - b$. After two years, the population will be $ay - b = a(ax - b) - b = a^2x - ab - b$. After three years, the population will be $a( a^2x - ab - b) - b = a^3x - a^2b - ab - b$. We are given that this is equal to $27x - 26$, so we have the equation:

\[a^3x - a^2b - ab - b = 27x - 26\]
We can rewrite this equation as:
\[a^3x - 27x = a^2b + ab + b - 26\]
Now we can factor out an $x$ on the left side and a $b$ on the right side:
\[x(a^3 - 27) = b(a^2 + a + 1 - 26/b)\]
We can see that $a = 3$ is a solution for the left side of the equation, so we can substitute that in:
\[x(0) = b(9 + 3 + 1 - 26/b)\]
This simplifies to:
\[0 = 13b - 26\]
Solving for $b$, we find that $b = 2$. So $a = 3$ and $b = 2$ are the values we are looking for.
}\hspace{0.02\linewidth}%
\parbox[t]{0.45\linewidth}{{\bf ChatGPT:} \\
\scriptsize
Let $n$ be the total number of rabbits at the end of the first year. Then,
$$n = ax$$
At the end of the third year, there will be $27x - 26$ rabbits. Therefore,
$$(ax - b)(a^2x - b)(a^3x - b) = 27x - 26$$

Expanding the left side of the equation, we get

$$a^6x^3 - (a^3 + a^2 + a + 1)bx^2 + (a^2 + a + 1)b^2x - b^3 = 27x - 26$$
\dots
}
\end{AIbox}
\caption{\DV vs ChatGPT on a simple math question composed by the authors of the paper.}
\label{fig:code-memory-align}
\end{figure}

%\ronen{the numbers in the problem don't match the solution, should be $27x+13$ instead of $3x+4$}

In order to solve the above question, one needs to first come up with the correct expression for the annual population change, use it to obtain a recurrence relation which leads to a system of equations and solve the system of two equations. \DV \ successfully arrives at the solution and produces a (mostly\footnote{At one point, the model assumes that the two sides of the equation need to be zero, which relies on an implicit assumption that the equation must have a solution. This turns out to be correct, but the reasoning is inaccurate.}) sound argument. By comparison, in several independent attempts, ChatGPT consistently fails to implement any of the above steps, producing a nonsensical argument which results in an incorrect answer.

\subsection{A mathematical conversation with the \DV}

We now try to further probe the model's understanding by posing several follow-up questions on this problem, in the form of a discussion.

\begin{figure}[H]
\begin{AIbox}{{\DV}}\vspace{-5px}
\parbox{1\textwidth}{\scriptsize\begin{alltt} 

\textbf{Human}: Note that the above question can be alternatively formulated as a question about a function which is composed with itself three times. Can you provide an alternative formulation of the question? \\

\textbf{AI}: \hl{Yes. We could say that we are looking for values of $a$ and $b$ such that if $f(x) = ax - b$, then $f(f(f(x))) = 27x - 26$.}
\end{alltt}}\vspace{-5px}
\end{AIbox}
\end{figure}
\DV \ grasped the crux of the question and provides a sound mathematical reformulation of the question. Next, we consider a generalization of the same question.

\subsubsection*{A generalization of the original question}
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} Let's now think of a modification of the question you formulated, where instead of $f(f(f(x)))$ we have the function $f$ composed with itself $k$ times. For which values of $k$ will such a linear function exist? \\

\textbf{AI:} \hl{For any value of $k$, there will be a linear function $f(x) = ax - b$ such that $f^k(x) = cx - d$ for some constants $c$ and $d$. To see this, we can use induction. For $k = 1$, we have $f^1(x) = ax - b$, which is already in the desired form. Now suppose that for some $k$, we have $f^k(x) = cx - d$. Then:

$f^{k+1}(x) = f(f^k(x)) = f(cx - d) = a(cx - d) - b = acx - ad - b$

This is again in the desired form, with $c' = ac$ and $d' = ad + b$. So by induction, we have shown that for any $k$, there will be a linear function $f(x) = ax - b$ such that $f^k(x) = cx - d$ for some constants $c$ and $d$.}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
At this point, it seems that the model is missing the point of the question (in the modified question, the values of $c$ and $d$ are prescribed, so the quantifier is incorrect). We try to point that out.
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} I don't exactly follow. Note that the only modification to the question is that instead of $f(f(f(x))) = 27x-26$, we now require that $f^k(x) = 27x-26$. Does your answer address this question? \\

\textbf{AI:} \hl{Yes, it does. My answer shows that for any $k$, there will be a linear function $f(x) = ax - b$ such that $f^k(x) = cx - d$ for some constants $c$ and $d$. In particular, we can choose $c = 27$ and $d = 26$ to satisfy the requirement that $f^k(x) = 27x - 26$. Then we can solve for $a$ and $b$ by equating the coefficients of $x$ and the constant terms.} \\

\textbf{Human:} In your previous answer, however, the quantifier on $c, d$ was "for some constants $c$ and $d$". Do you see the problem? \\

\textbf{AI:} \hl{Yes, I see the problem. The quantifier should be "for any constants $c$ and $d$". Otherwise, it would imply that there is only one pair of constants $c$ and $d$ that works for a given $k$, which is not true.}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
The last answer is not accurate (the word "only" is out of place), but \DV \ does seem to understand what the problem is. 

\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} Well, the question indicated a specific choice of $c$ and $d$. Can you correct your solution then?  \\

\textbf{AI:} \hl{Sure. I can correct my solution as follows: For any value of $k$, there will be a linear function $f(x) = ax - b$ such that $f^k(x) = 27x - 26$. To see this, we can use induction. For $k = 1$, we have $f^1(x) = ax - b$, which is equal to $27x - 26$ if we choose $a = 27$ and $b = 26$. Now suppose that for some $k$, we have $f^k(x) = 27x - 26$. Then: $f^{k+1}(x) = f(f^k(x)) = f(27x - 26) = a(27x - 26) - b = 27ax - 26a - b$ To make this equal to $27x - 26$, we need to choose $a = 1$ and $b = 0$.}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
At this point, \DV \ does not seem to follow its own reasoning. As a result, the induction argument is invalid, as explained below.
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} Let me stop you here. You seem to be assuming that $f^k(x) = 27x - 26$ which fixes the values of $a$ and $b$, so how can you now choose new values for $a$ and $b$? \\

\textbf{AI:} \hl{I see your point. I was trying to find a function $f(x) = ax - b$ that works for any $k$, but I should have fixed $k$ first and then found $a$ and $b$. Let me try again. \\

AI: Suppose we fix a value of $k$ and we want to find a linear function $f(x) = ax - b$ such that $f^k(x) = 27x - 26$. We can use the following method: }\\
\begin{itemize}
\item
\hl{Start with $f^1(x) = ax - b$ and equate it to $27x - 26$. This gives us two equations: $a = 27$ and $b = 26$.}
\item
\hl{Then, apply $f$ to both sides of $f^1(x) = 27x - 26$. This gives us $f^2(x) = a(27x - 26) - b = 27ax - 26a - b$ and $f(27x - 26) = 27x - 26$.}
\item
\hl{Compare the coefficients of $x$ and the constant terms on both sides of $f^2(x) = f(27x - 26)$}
\end{itemize}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
The model repeats the same conceptual mistake as above (once again, even though the choice of $a$ and $b$ has been fixed, they are treated as variables whose value may still be chosen). Uninterrupted, it goes on with the argument without getting anywhere.

Several attempts to continue this dialog all ended up in a dead end, as \DV \ effectively keeps trying different variations on the same (invalid) induction argument. On the other hand, different (but equivalent) formulations of the original question in an earlier part of the discussion, occasionally lead to a correct line of reasoning (depending on the exact wording).

\subsubsection*{A second variant of the original question}
Next, we try to modify the original question in another direction, asking about the case of higher degree polynomials.
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} Now suppose that I changed the question so that the function $f$ is a polynomial of degree $2$ (where the coefficient of $x^2$ is non-zero). Would you be able to find such a function in this case? How will this change things? \\

\textbf{AI:} \hl{If $f$ is a polynomial of degree $2$, then we can write $f(x) = ax^2 + bx + c$ for some constants $a, b, c$. Then, the given equation becomes...}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
At this point, \DV \ outputs a very long calculation, makes several mistakes and does not arrive at the correct answer (being that there is no solution in this case). Instead, we interrupt it and advise it to think more abstractly.
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} Hold on- before you try to explicitly write this calculation, perhaps there is something you can deduce here without carrying out any calculations? \\

\textbf{AI:} \hl{Well, one thing I can notice is that if $f$ is a polynomial of degree $2$, then $f(f(f(x)))$ is a polynomial of degree $8$, since the degree of a composition of polynomials is the product of the degrees of the polynomials. However, the right-hand side of the equation, $27x + 13$, is a polynomial of degree $1$. This means that there is a contradiction, since a polynomial of degree $8$ cannot be equal to a polynomial of degree $1$ for all values of $x$. Therefore, there is no polynomial of degree $2$ that satisfies the equation $f(f(f(x))) = 27x + 13$.}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
This is a sound argument. We now follow up with another question:
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} Right. So, linear functions are nice because if you compose a linear function with itself you still get a linear function. What other classes of functions with that property are there? \\

\textbf{AI:} \hl{Some other classes of functions that have this property are exponential functions, logarithmic functions, and power functions. For example, if $f(x) = e^x$, then $f(f(x)) = e^{e^x}$, which is still an exponential function. Similarly, if $f(x) = \log x$, then $f(f(x)) = \log(\log x)$, which is still a logarithmic function. And if $f(x) = x^k$ for some constant $k$, then $f(f(x)) = (x^k)^k = x^{k^2}$, which is still a power function. These functions are called iterated functions, and they have some interesting properties and applications in mathematics.}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
This is a mistake of course, as the classes of exponential and logarithmic functions do not have the desired property (they are not closed under composition). Next, we check if \DV \ is able to realize and correct its mistake.
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
\textbf{Human:} Are you sure $e^{e^x}$ is an exponential function? \\

\textbf{AI:} \hl{Well, it depends on how you define an exponential function. Some sources define an exponential function as a function of the form $f(x) = a^x$ for some constant $a > 0$. In this case, $e^{e^x}$ is not an exponential function, since it does not have a constant base. However, some other sources define an exponential function more generally as a function that satisfies $f(x + y) = f(x)f(y)$ for all $x, y$. In this case, $e^{e^x}$ is an exponential function, since it satisfies this property. This is because $e^{e^{x + y}} = e^{e^x + e^y} = e^{e^x}e^{e^y}$, using the properties of exponentiation and logarithms. So, the answer depends on the definition you use.} \\

\textbf{Human:} Why is the fact that $e^{e^{x + y}} = e^{e^x + e^y}$ correct? It seems to imply that $e^{x+y} = e^x + e^y$. \\

\textbf{AI:} \hl{No, it does not imply that $e^{x+y} = e^x + e^y$. That would be incorrect, since exponentiation is not a linear operation. The reason why $e^{e^{x + y}} = e^{e^x + e^y}$ is correct is because we can use the logarithm function to rewrite it as $\log(e^{e^{x + y}}) = \log(e^{e^x + e^y})$. Then, using the property that $\log(e^z) = z$ for any $z$, we get $e^{x + y} = e^x + e^y$, which is true by definition of the exponential function. So, we can go back and forth between the exponential and logarithmic forms using the inverse relationship between them.} \\

\textbf{Human:} Wait so is it true that $e^{x+y} = e^x + e^y$ or is it not true? You seem to contradict yourself. \\

\textbf{AI:} \hl{It is not true that $e^{x+y} = e^x + e^y$. That is a common misconception that arises from confusing the exponential and logarithmic forms. What is true is that $e^{e^{x + y}} = e^{e^x + e^y}$, which is a different statement. The difference is that in the first statement, the exponent is $x + y$, while in the second statement, the exponent is $e^{x + y}$.}
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}
This discussion seems to have driven \DV \ to a dead end, and it begins contradicting itself and produces increasingly incoherent arguments as the conversation continues. \\

One might speculate at this point that \DV \ simply lacks the relevant knowledge regarding the behavior of exponential functions. However, this does not seem to be the case, as the model can correctly answer and justify the question "Is it true that $a{b^c} = (a^b)^c$?". This suggests that, as in other domains, \DV's mathematical knowledge is \emph{context-dependent}. In fact, a slight change in the wording or even a single character of the question can alter the knowledge that the model displays in its answer. \\

\subsubsection*{Analysis of the limitations highlighted by conversation}
The above dialogue highlights a striking contrast between the model's performance on tasks and questions that require a significant level of mathematical sophistication on one hand, and its basic mathematical errors and nonsensical statements on the other. If a human were to produce the latter, we would doubt their understanding. Arguably, this contrast is very atypical to humans. \\

Therefore, we face a challenging question:
\begin{quote}
To what extent does the model demonstrate "understanding"?
\end{quote}
This question is not well-defined, but to approach it, we want to argue that mathematical understanding has several aspects:
\begin{enumerate}
\item 
The ability to choose a suitable approach for the solution and identify which arguments, intermediate steps, calculations or algebraic manipulations are likely to be relevant at each stage. To relate this to the example above, the model correctly chooses to try and write recurrence relations, before "knowing" whether or not this path is going to lead to a solution. This component is often based on a heuristic guess (or in the case of humans, intuition), and is often considered to be the most nontrivial part of doing mathematics.
\item
The ability to apply mechanical procedures (such as differentiating a function or isolating a term in an equation) or knowledge (such as recognizing that two expressions are equivalent due to a certain mathematical fact).
\item
The ability to critically examine each step of the argument, break it down into its sub-components, explain what it entails, how it is related to the rest of the argument and why it is correct. When solving a problem or producing a mathematical argument, this usually comes together with the ability backtrack when a certain step is realized to be incorrect and modify the argument accordingly.
\end{enumerate}

We now want to analyze the model's performance in each of these aspects of mathematical understanding, and discuss some possible reasons for its strengths and weaknesses.\\

The model seems to demonstrate a high level of ability in the first aspect, namely choosing the right argument or path towards the solution. It often comes up with a good next step in the argument, or a relevant fact or formula to use. For example, in the dialogue above, the model correctly suggests to use a recurrence relation in the original question and to argue about the degrees of compositions of polynomials in the follow up question. We could say that this ability is comparable to that of a good high-school student, or even higher in some cases. \\

The model is somewhat reasonable in the second aspect, namely applying mechanical procedures or knowledge. However, it also makes quite a lot of mistakes when performing these tasks, such as making arithmetic mistakes, confusing the order of operations or using incorrect notation. We will discuss some examples of these errors later in this section. In any case, this aspect could be improved by giving the model access to code execution, which would allow it to perform calculations or check equivalences more accurately. \\

The main point we want to make is that the model exhibits a significant deficiency in the third aspect, namely critically examining each step of the argument. This could be attributed to two factors: First, the training data of the model mainly consists of questions and their solutions, but it does not capture the wording that expresses the thinking process that someone has when trying to solve a math problem, where they sometimes encounter errors, try to verify which part is correct, backtrack, etc. So the training data is essentially a linear exposition of the solution, and there is no incentive for the model to be able to engage in a conversation where it revisits and critically evaluates a part of the proof. Second, the limitation to try things and backtrack is inherent to the next-word-prediction paradigm that the model operates on. It only generates the next word, and it has no mechanism to revise or modify its previous output, which makes it produce arguments "linearly". \\

Loosely speaking, we can therefore see the drawbacks of the model as a combination of "naive" attention mistakes with more fundamental limitations due to its "linear thinking" as a next-token prediction machine. An important question is which of the above issues can be alleviated by further training (perhaps with a larger model). For the former problem we believe that further training could alleviate the issue, as evidenced by the super-human coding abilities where such attention mistakes would also be fatal, and a key difference is that most likely DV3 was trained on much more code than mathematics data. The latter issue, is discussed in more detail in section \ref{sec:limitations} below. \\

In the remainder of the section, we assess the model's capabilities on commonly used benchmarks for mathematical problem solving, we then demonstrate the model's capability of applying quantitative thinking in real-world scenarios, and finally, we further discuss some of the limitations of the model in regards to mathematical reasoning. We also compare the responses of {\DV} and ChatGPT to various math questions (more examples in Appendix \ref{sec:math_appendix}). We find that {\DV}, despite making some calculation mistakes, demonstrates a deeper understanding of the problem and applies the appropriate reasoning. ChatGPT, on the other hand, often resorts to low-level heuristics, mentioning formulas and concepts that are only superficially related to the problem without showing actual comprehension.

\subsection{Performance on mathematical problem datasets}
We begin by conducting systematic experiments to compare the performance of \DV, ChatGPT and Minerva (state-of-the-art LLM for solving math questions) on two math data sets which are commonly used as benchmarks: GSM8K and MATH. GSM8K is an elementary school math data set that contains 8,000 questions and answers on topics such as arithmetic, fractions, geometry, and word problems. MATH is a high school math data set that contains 12,500 questions and answers on topics such as algebra, calculus, trigonometry, and probability. We also test the model on MMMLU-STEM data set, which contains around 2000 multiple choices (4 choices) questions covering high school and college STEM topics. 
\begin{comment}

\paragraph{Could it be that \DV's advantage is simply due to better memorization capabilities?} One possible explanation for \DV's superior performance on solving mathematical questions is that \DV \ has a better memory than ChatGPT or other LLMs, and that it can recall the questions or solutions from its pre-training data. However, based on the examples, we have reasons to believe that \DV \ does not rely on memorization but on understanding and applying mathematical concepts and rules. Here are some of our reasons:
\begin{enumerate}
    \item In the benchmarks, we tested \DV \ by asking it to (1) write the template, (2) write down the steps first then write down the final answer. The templates are not available online, and detailed solutions for datasets such as MMMLU-STEM are also not online (only the answer is). Moreover, even when the solution is possibly online, \textbf{we often observe that \DV \ uses a different approach than the existing ones.} For example, in the $\sin(a + b)$ example, \DV \ takes several reasonable, but unnecessary steps that are not part of a standard solution.
    \item We also crafted some mathematical questions by ourselves, carefully checking that these questions or close variants do not appear online. \DV \ still solves these questions like the standard ones. 
\end{enumerate}
\end{comment}
\paragraph{Mitigating over-fitting} It is believable that {\DV}, due to its enormous size, has a better memory than ChatGPT or other LLMs, and that it could possibly recall the questions or solutions for the benchmark datasets from its pre-training data. To mitigate such overfitting, we use the following approaches:
\begin{enumerate}
    \item In the benchmarks, we tested \DV \ by asking it to (1) write the template, (2) write down the steps first then write down the final answer. The templates are not available online, and detailed solutions for datasets such as MMMLU-STEM are also not online (only the answer is). %Moreover, even when the solution is possibly online, \textbf{we often observe that \DV \ uses a different approach than the existing ones.} %For example, in the $\sin(a + b)$ example, \DV \ takes several reasonable, but unnecessary steps that are not part of a standard solution.
    \item We pick one representative question from the data set where {\DV} solves correctly and Text-davinci-003 solves wrongly. We alter the numbers in the question and see that {\DV} is consistently correct and Text-davinci-003 is consistently wrong. 
    \item We also crafted some mathematical questions by ourselves, carefully checking that these questions or close variants do not appear online. {\DV} still solves these questions like the standard ones. 
\end{enumerate}
%To prevent overfitting, we measure the model's accuracy by requiring it to generate a template first, as shown below:
\begin{figure}[H]
\begin{AIbox}{{\DV} Generating Template}\vspace{-5px}
\parbox{1\textwidth}{\scriptsize\begin{alltt} 
{\bf Prompt:} Andy harvests all the tomatoes from 18 plants that have 7 tomatoes each. If he dries half the tomatoes and turns a third of the remainder into marinara sauce, how many tomatoes are left?\\
Can you generate a template solution for the problem without numbers?\\

\hl{Using symbols, the template solution could look something like this:\\
- Let P be the number of plants and T be the number of tomatoes per plant. Then the total number of tomatoes harvested is P x T.\\
- Let D be the number of tomatoes that are dried. Then D = (P x T) / 2.\\
- Let M be the number of tomatoes that are turned into marinara sauce. Then M = ((P x T) - D) / 3.\\
- Let L be the number of tomatoes that are left. Then L = (P x T) - D - M.\\
$\cdots$}\end{alltt}}\vspace{-5px}
\end{AIbox}
%\caption{}
\end{figure}


\begin{figure}[H]
\begin{AIbox}{{\DV} memorization test by alternating the numbers}\vspace{-5px}
\parbox{1\textwidth}{\scriptsize\begin{alltt} 
{\bf Prompt:} If a degree 3 polynomial satisifies p(x) = 0 for x = -3, 8, 5 and p(1) = 10, what is |p(0)|? \end{alltt}}\vspace{-5px}
\end{AIbox}
\caption{\DV memorization test: Here we alternate the value of $a$ as three randomly chosen numbers from $\{-10, -9, \cdots, -2 \} \cup \{2, 3, \cdots, 10 \}$ and the value of $p(1)$ from $\{-10, -9 ,\cdots, -1 \} \cup \{1, 2, \cdots, 10\}$. \{\DV\}'s accuracy is .. while text-davinci-003's accuracy is .}
\end{figure}

For the benchmark datasets, we evaluated the models on their \textbf{single model} accuracy, which is the percentage of questions that they answered correctly in one shot. The results are shown in the following table:

\begin{table}[h]
\centering
\begin{tabular}{lcccc}
\hline
Model & GSM8K & GSM8K ({\DV} solved incorrectly) & MATH  & MMMLU-STEM\\
\hline
Text-Davinci-003 & 61.3\%  & 29.5\% & 23.5\% &54.2\% \\
Minerva & 58.8\% & - & 33.6\%& 63.9\% \\
{\DV} & 87.1\% & -  & 42.5\%  & 82.7\% \\
\hline
\end{tabular}
\caption{Accuracy of different models on math data sets}
\label{tab:math}
\end{table}

{\DV}'s accuracy shows a modest improvement over other models, but a manual inspection of {\DV}'s answers on MATH and GSM8K reveals that most of the errors are due to calculations. These are questions that involve large numbers or complex expressions that pose a challenge for LLMs (see the limitation section for more discussion). In contrast, many of ChatGPT's errors stem from \emph{a lack of problem-solving skills}. We present two examples below, and provide more in the Appendix on some \textbf{Chinese College Entrance Exam level} questions and selected questions from USAMO/IMO.

%The results show that {\DV} achieved a high level of accuracy on the GSM8K data set, indicating a strong grasp of the problem structure and format. To prevent overfitting, we measure the model's accuracy by requiring it to generate a template for GSM8K first, and then fill in numbers to the template to solve the problem (see below). Most of the errors made by the model were due to calculation mistakes, which are somewhat expected since language models are not trained to perform precise arithmetic operations. For the more challenging MATH data set, {\DV} also showed a significant improvement over other models.
 %In the following section, we demonstrate that {\DV} is capable of doing at least high-school-level mathematical reasoning. We evaluate {\DV} on math problems that comes from \textbf{Chinese College Entrance Exam}, and mannually translate them to English. The example topics cover various topics, such as algebra, geometry, and calculus. We show that {\DV} can generate correct answers and provide intermediate steps and explanations for its solutions, almost matching a high-school human solver.

%In the following subsection, we test {\DV} and ChatGPT (arguably the best natural language generation model available to the public) on a range of different mathematical tasks. We demonstrate that {\DV} understands all those mathematical concepts, while ChatGPT does not. In the end, we perform a systematic test on the performance difference between {\DV} and text-Davinci-003 (similar to ChatGPT) on a different levels of mathematical reasoning data sets. 

\begin{figure}[H]
\begin{AIbox}{\DV \ vs ChatGPT}
{\bf Prompt:} \\
{\scriptsize
A rain barrel collects water off the roof of a house during three hours of heavy rainfall. The height of the water in the barrel increases at the rate of $r(t) = 4t^3e^{-1.5t}$ feet per hour, where $t$ is the time in hours since the rain began. At time $t = 1$ hour, the height of the water is $0.75$ foot. What is the height of the water in the barrel at time $t = 2$ hours?
}\\

{\bf \DV:} \\
{\scriptsize
If we can find a function $F$ such that $F'(t) = r(t)$, then $F(2) - F(1)$ is the amount that the height of the water increases from $t = 1$ to $t = 2$.\\
To find such a function $F$, we can use the technique of integration by parts, which says that if $u$ and $v$ are differentiable functions, then\\
$$\int u dv = uv - \int v du$$
Applying this to $r(t) = 4t^3e^{-1.5t}$, we can choose $u = t^3$ and $dv = 4e^{-1.5t} dt$, so that $du = 3t^2 dt$ and $v = -\frac{8}{3}e^{-1.5t}$. Then we have
$$\int 4t^3e^{-1.5t} dt = -\frac{8}{3}t^3e^{-1.5t} - \int -\frac{8}{3}e^{-1.5t} 3t^2 dt$$
Simplifying and applying integration by parts again, we can choose $u = t^2$ and $dv = -\frac{8}{3}e^{-1.5t} dt$, so that $du = 2t dt and v = \frac{16}{9}e^{-1.5t}$. Then we have
$$\int 4t^3e^{-1.5t} dt = -\frac{8}{3}t^3e^{-1.5t} + \frac{16}{9}t^2e^{-1.5t} - \int \frac{16}{9}e^{-1.5t} 2t dt$$
...
}\\

{\bf ChatGPT:} \\
{\scriptsize
To find the height of the water in the barrel at time $t = 2$ hours, we need to find the value of $r(2)$. We can do this by plugging $2$ in for $t$ in the expression for $r(t)$:
$$r(2) = 4(2)^3e^{-1.5(2)} = 32e^{-3}$$
To find the height of the water in the barrel at time $t = 2$ hours, we need to add the amount of water collected during the first hour ($0.75$ feet) to the amount of waterrorsllected during the second hour ($r(2)$ feet). So, the total height of the water in the barrel at time $t = 2$ hours is:
$$0.75 + r(2) = 0.75 + 32e^{-3} \approx 0.91 \mathrm{ feet}$$
Therefore, the height of the water in the barrel at time $t = 2$ hours is approximately $0.91$ feet.
}
\end{AIbox}
\caption{(Continuation) {\DV} vs ChatGPT on AP problems. {\DV} uses the correct approach, but made some calculation errors while ChatGPT fails in reasoning.}
\end{figure}

Above are typical examples of {\DV}'s generation versus ChatGPT on high school-level math questions. {\DV}'s solution, though incomplete or wrong due to calculation errors, still demonstrates its ability to apply the appropriate rules and techniques to the problem, while ChatGPT produces nonsensical output. In Section~\ref{sec:math_appendix_prog}, we also show that \DV\ can overcome the calculation errors by prompting the model to write code in order to do the calculation. This gives additional evidence supporting \DV's ability to grasp the problem and successfully apply mathematical reasoning. 
%Thus, we believe that {\DV}'s mathematical skill compared to other models cannot be adequately captured by accuracy alone, so we provide more examples in Section \ref{sec:math_appendix} where {\DV} successfully solves many problems that ChatGPT fails to comprehend.



\begin{figure}[H]
\begin{AIbox}{\DV \ vs ChatGPT}
{\bf Prompt:} \\
{\scriptsize
A good number is a 5-digit number where the 1,3,5-th digits are odd numbers and they form an increasing arithmetic progression, and the number is divisible by 3. If I randomly sample a good number, what is the probability that its 2nd digit is 4?
}\\

{\bf \DV:} \\
{\scriptsize
There are a few ways to approach this problem, but one possible method is to use some modular arithmetic and enumeration. 
First, we can observe that a 5-digit number is divisible by 3 if and only if the sum of its digits is divisible by 3. So, if we let the 5-digit number be $abcde$, where $a$, $c$, and $e$ are odd digits forming an arithmetic progression, we have the equation:
$$a + b + c + d + e = 0 \quad (\textrm{mod } 3)$$
We can also observe that the difference between any two consecutive terms in an arithmetic progression is constant, so we can let that difference be $f$,  where $f$ is a positive integer. Then we have:
$$c = a + f, e = a + 2f$$
Substituting these into the equation above, we get:
$$a + b + a + f + d + a + 2f = 0 \quad (\textrm{mod } 3)$$
$$3a + b + d + 3f = 0 \quad (\textrm{mod } 3)$$
Since $3a$ and 3f are always divisible by 3, we can ignore them and focus on the equation:
$$b + d = 0 \quad (\textrm{mod } 3)$$
The choice of $a$, $f$ and $e$ does not affect this equation, so we can fix them and vary $b$ and $d$. For example, let $a$ = 1, $f$ = 2, and $e$ = 5. Then we have the possible values of $b$ and $d$ as:
$$b = 0, d = 0, 3, 6, 9; b = 1, d = 2, 5, 8; b = 2, d = 1, 4, 7; b = 3, d = 0, 3, 6, 9; b = 4, d = 2, 5, 8$$
$$b = 5, d = 1, 4, 7; b = 6, d = 0, 3, 6, 9; b = 7, d = 2, 5, 8; b = 8, d = 1, 4, 7; b = 9, d = 0, 3, 6, 9$$
We can see that there are 10 possible values of $b$, and for each value of $b$, there are 4 possible values of $d$. So, there are $10 \times 4 = 40$ possible pairs of b and d that satisfy the equation. Out of these 40 pairs, only 3 have $b = 4$, namely (4, 2), (4, 5), and (4, 8). So, the probability that $b = 4$ is $3/40$.
}\\

{\bf ChatGPT:} \\
{\scriptsize
In order for the 2nd digit of the good number to be 4, the 1st digit must be an odd number that is 3 greater than the 3rd digit. The 3rd digit must also be an odd number that is 3 less than the 5th digit. The 5th digit must be an odd number that is greater than the 3rd digit.
There are 5 possible choices for the 1st digit (1, 3, 5, 7, 9), 5 possible choices for the 3rd digit (1, 3, 5, 7, 9), and 5 possible choices for the 5th digit (3, 5, 7, 9, 11). Therefore, there are $5 \times 5 \times 5 = 125$ possible combinations of the 1st, 3rd, and 5th digits.
Since the 1st, 3rd, and 5th digits must form an increasing arithmetic progression, there is only 1 way to arrange them such that the 2nd digit is 4. Therefore, the probability that the 2nd digit of a randomly sampled good number is 4 is $1/125$, or approximately 0.008.
}
\end{AIbox}
\caption{\DV vs ChatGPT on a novel math question created by the authors (\DV \ still has a counting mistake at the end).}
\end{figure}


\subsection{Mathematical modeling in various domains}
Mathematical reasoning is a skill that \textbf{goes beyond} the ability to solve equations and formulas. It is also a tool for reasoning, analyzing, and communicating in various contexts and situations. In this section, we test {\DV}'s ability to apply mathematical concepts and methods to real-world problems, including questions which are not completely mathematically well-defined but whose solution requires quantitative reasoning. Once again, we use questions that, to the best of our knowledge, do not appear online.

\begin{comment}
We begin with a iconic question: 
\begin{tcolorbox}[colback=white!5!white,adjusted title=Prompt]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
What if a needle hit earth at a speed of 0.9 lightspeeds?
\end{minted}
\end{tcolorbox}
\begin{figure}[H]



\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title=ChatGPT]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
If a needle were to hit the Earth at a speed of 0.9 times the speed of light, it would be an extremely high-energy event. The kinetic energy of the needle would be converted into other forms of energy, such as heat and light, upon impact. The resulting explosion would be extremely powerful and would likely cause significant damage to the area around the impact site. It is not something that is likely to happen naturally, and it is not something that we should try to intentionally cause.
\end{minted}
\end{tcolorbox}
\end{figure}

\begin{figure}[H]
\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Assuming the needle is made of steel, has a mass of 1 gram, a length of 5 cm, and a diameter of 0.5 mm, we can estimate its kinetic energy, momentum, and cross-sectional area. Using the relativistic formulas for kinetic energy and momentum, we get:
K = mc^2 (gamma - 1) = 0.001 kg * (3 * 10^8 m/s)^2 * (2.29 - 1) = 1.03 * 10^14 J
p = gamma * mv = 2.29 * 0.001 kg * 0.9 * 3 * 10^8 m/s = 6.21 * 10^5 kg m/s
A = pi * r^2 = pi * (0.00025 m)^2 = 1.96 * 10^-7 m^2
where gamma is the Lorentz factor, given by gamma = 1 / sqrt(1 - v^2 / c^2) = 2.29 for v = 0.9 c.
For comparison, the kinetic energy of the needle is equivalent to about 24.6 megatons of TNT, or about 1.5 times the yield of the Tsar Bomba, the most powerful nuclear weapon ever detonated. The momentum of the needle is equivalent to about 62,100 tons of mass moving at 10 m/s, or about 1.5 times the mass of the Titanic moving at a brisk walking pace. The cross-sectional area of the needle is about 0.00002\% of the cross-sectional area of a human hair.
Now, assuming the needle hits the earth at a right angle, and neglecting any effects of air resistance, gravity, or rotation, we can estimate the impact force, pressure, and duration. Using the impulse-momentum theorem, we get:
F * delta t = delta p = -p
where F is the average force, delta t is the impact duration, and delta p is the change in momentum. Assuming the needle comes to a complete stop after hitting the earth, we get:
F * delta t = -6.21 * 10^5 kg m/s
To estimate the impact duration, we can assume that the needle penetrates the earth by a distance equal to its length, 0.05 m, and that its speed decreases linearly from 0.9 c to zero during this process. This gives us:
delta t = 2 * d / v = 2 * 0.05 m / (0.9 * 3 * 10^8 m/s) = 3.7 * 10^-10 s
Plugging this into the previous equation, we get:
F = -6.21 * 10^5 kg m/s / (3.7 * 10^-10 s) = -1.68 * 10^15 N
This is the average force exerted by the needle on the earth, and vice versa, during the impact. To estimate the pressure, we can divide this force by the cross-sectional area of the needle, giving us:
P = F / A = -1.68 * 10^15 N / (1.96 * 10^-7 m^2) = -8.57 * 10^21 Pa
This is the average pressure experienced by the needle and the earth at the point of contact during the impact. For comparison, the pressure at the center of the earth is estimated to be about 3.6 * 10^11 Pa, and the pressure at the bottom of the Mariana Trench, the deepest point in the ocean, is about 1.1 * 10^8 Pa. The pressure exerted by the needle is about 24 billion times greater than the pressure at the center of the earth, and about 78 trillion times greater than the pressure at the bottom of the ocean.
\end{minted}
\end{tcolorbox}
\end{figure}

The two responses show a clear contrast in their level of mathematical reasoning. {\DV} demonstrates the ability to formulate a model and use appropriate tools to explore the implications of moving at 0.9 lightspeed, without being prompted to do so. ChatGPT, on the other hand, gives a generic answer that lacks any mathematical support or explanation for why 0.9 lightspeed is very dangerous.

We test {\DV} and ChatGPT with another prompt:


\begin{tcolorbox}[colback=white!5!white,adjusted title=Prompt]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
How fast will a car hit an egg to break it?
\end{minted}
\end{tcolorbox}

\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title=ChatGPT]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
It's difficult to give a precise answer to this question because the speed at which a car would need to be traveling in order to break an egg would depend on various factors, including the size and shape of the car, the type of surface the car is traveling on, and the type of egg. However, it is generally safe to say that a car would need to be traveling at a relatively high speed in order to break an egg.
\end{minted}
\end{tcolorbox}

ChatGPT responds to the question with a vague and intuitive answer, saying that the car needs to be traveling at a high speed. It does not show any evidence of mathematical thinking or problem-solving skills. It seems to rely on common sense or heuristics, rather than logic or calculations. ChatGPT does not treat the question as a math problem but as a casual conversation topic. Even if we prompt ChatGPT to build a mathematical model, it still only gives a template answer without actually solving the problem.
{\DV}, on the other hand, demonstrates a deeper and more systematic approach to the question. It sets up a physical model of the situation, and uses mathematical thinking to analyze the forces and velocities involved in the collision between the car and the egg. It tries to find the exact answer or the range of possible answers, rather than giving a general or vague answer. {\DV} shows that it can think about the question as a math problem, although it is not defined in a standard mathematical formulation.
\begin{figure}[H]
\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title=ChatGPT(Prompt to build math model)]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
To do this, we can use the formula:
Force = Mass * Acceleration
Where:
Force is the amount of force needed to break the egg
Mass is the weight of the car
Acceleration is the speed at which the car is traveling
We can rearrange this formula to solve for acceleration:
Acceleration = Force / Mass
To determine the force needed to break the egg, we can use the following formula:
Force = Pressure * Area
Where:
Pressure is the force applied per unit area
Area is the surface area of the eggshell being impacted
Substituting this formula into the first equation, we get:
Acceleration = (Pressure * Area) / Mass
To solve for the acceleration, we would need to determine the pressure and area of the eggshell being impacted, as well as the mass of the car. With this information, we can calculate the approximate speed at which the car would need to be traveling in order to break the egg.
\end{minted}
\end{tcolorbox}
\end{figure}
\begin{figure}[H]
\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{latex}
Impulse = Force x Time = Change in Momentum
If we assume that the car is much heavier than the egg and that its speed does not change significantly during the collision, then the change in momentum of the car is approximately equal and opposite to the change in momentum of the egg. Therefore, we can write:
Impulse = -m_e(v_f - v_i)
where m_e is the mass of the egg, v_f is the final speed of the egg after the collision, and v_i is the initial speed of the egg before the collision. We can also assume that the egg is initially at rest, so v_i = 0.
To find the force and time involved in the collision, we need to know the breaking strength of the egg and the deformation distance of the car and the egg. The breaking strength of an egg is the amount of force per unit area required to crack its shell, and it varies depending on the breed, age, and diet of the chicken, as well as the shape and thickness of the shell. According to some sources, the average breaking strength of a chicken egg is about 40 N/cm^2, or 4 kPa. The deformation distance of the car and the egg is the amount of compression or indentation that occurs when they collide, and it depends on the elasticity and rigidity of the materials involved. For simplicity, we can assume that the car and the egg are both spherical and have the same deformation distance, which we will call d.
Using the formula for the area of a sphere, we can find the force exerted by the car on the egg as: Force = Breaking Strength x Area = 4 kPa x 4 pi r^2
where r is the radius of the egg. Assuming that the egg has a radius of about 2.5 cm, we get: Force = 4 kPa x 4 pi (0.025 m)^2. Force = 7.85 N
Using the formula for the average speed of an object undergoing constant acceleration, we can find the time of the collision as: Time = 2d / (v_f + v_i)
Since we assumed that the egg is initially at rest, we can simplify this as: Time = 2d / v_f
To find the deformation distance, we can use the conservation of energy principle, which states that the kinetic energy of the egg before the collision is equal to the work done by the force during the collision. The work done by the force is equal to the force times the displacement, so we can write: 0.5m_ev_f^2 = Force x d. Solving for d, we get: d = 0.5m_ev_f^2 / Force
Substituting the values we found for the mass, force, and final speed of the egg, we get: d = 0.5(0.06 kg)v_f^2 / 7.85 N. d = 0.0019v_f^2
Plugging this into the equation for the time of the collision, we get: Time = 2(0.0019v_f^2) / v_f. Time = 0.0038v_f
Finally, substituting the expressions for the force and time into the equation for the impulse, we get: 7.85 N x 0.0038v_f = -0.06 kg(v_f - 0). Solving for v_f, we get: v_f = -7.85 N x 0.0038v_f / 0.06 kg. v_f = -0.5 m/s
This means that the egg will rebound from the car with a speed of 0.5 m/s in the opposite direction of the car's motion. However, this is the speed of the egg after the collision, not the speed of the car before the collision. To find the speed of the car, we need to consider the relative speed of the car and the egg, which is the difference between their speeds. Since the car and the egg are moving in opposite directions, we can write:
Relative Speed = v_c - v_f. where v_c is the speed of the car before the collision. Rearranging this, we get: v_c = Relative Speed + v_f
To find the relative speed, we need to know the minimum speed at which the car and the egg will collide, which depends on the distance between them and the reaction time of the driver. For example, if the car is 10 m away from the egg and the driver has a reaction time of 0.5 s, then the car needs to travel at least 20 m/s (or 72 km/h) to hit the egg before the driver can brake. However, this is the minimum speed, not the actual speed, so the car could be going faster than this. Therefore, the relative speed is at least 20 m/s, but it could be higher.
Using this value, we can find the speed of the car as:
v_c = 20 m/s + (-0.5 m/s). v_c = 19.5 m/s
This means that the car needs to hit the egg with a speed of at least 19.5 m/s (or 70.2 km/h) to break it, assuming the idealized conditions we used in our calculations. However, this is only an estimate, and the actual speed could vary depending on the factors we mentioned earlier. Therefore, the best way to find out the exact speed needed is to conduct an experiment with different car and egg models and measure the results.
\end{minted}
\end{tcolorbox}
\end{figure}
\end{comment}
%The population of a town grows from 1000 to 10000 in 100 years. No one came or left %the town. How many people are there with an age between 40 and 50?
We start with the following question: \vspace{-3mm}
\begin{figure}[H]
\begin{AIbox}{\DV \ vs ChatGPT}
{\bf Prompt:} \\
{\scriptsize
How fast does an iron ball whose radius is 1 meter need to move, in order to get to a distance of 1km from the sun before melting?
}\\

{\bf \DV:} \\
{\scriptsize
There are a few different ways to approach this question, but one possible method is to use the following assumptions and simplifications:\\
- The iron ball is spherical, homogeneous, and has a density of $7.8 \mathrm{g}/\mathrm{cm}^3$ and a melting point of 1538 °C.\\
- The iron ball starts from the Earth's orbit, which has a mean distance of 149.6 million km from the sun and a mean orbital speed of 29.8 km/s.\\
- The iron ball follows a straight-line trajectory towards the sun, ignoring the effects of gravity, drag, radiation, and other celestial bodies.\\
- The iron ball heats up due to the solar radiation, which has an average intensity of $1361 \mathrm{W}/\mathrm{m}^2$ at the Earth's orbit and follows an inverse square law with distance.\\
- The iron ball has a specific heat capacity of 0.45 J/g°C and a latent heat of fusion of 247 J/g.\\
- The iron ball does not lose heat by conduction, convection, or radiation, and its temperature is uniform throughout.\\
Using these assumptions, we can calculate the time it takes for the iron ball to reach the sun and the temperature it reaches at different distances. We can also compare the temperature with the melting point and find the distance at which the iron ball melts.\\
The time it takes for the iron ball to reach the sun is given by: $t = d / v$ where d is the distance from the sun and $v$ is the speed of the iron ball. Assuming the iron ball starts from the Earth's orbit, we have: $t = 149.6 \mathrm{\ million\ km} / v$. The temperature of the iron ball at a given distance is given by: $T = T_0 + Q / mc$ where $T_0$ is the initial temperature, $Q$ is the heat absorbed by the iron ball, $m$ is the mass of the iron ball, and $c$ is the specific heat capacity of iron. Assuming the iron ball starts at 15 °C, we have:
$$T = 15^\circ C + Q / (4/3 * \pi \times 1^3 \times 7.8 \times 10^6 \times 0.45)$$
The heat absorbed by the iron ball at time $t$ is given by: $Q(t) = P(t) A$ where $P(t)$ is the power of the solar radiation at time $t$ and $A$ is the cross-sectional area of the iron ball. Assuming the iron ball has a radius of 1 m, we have $A = \pi * 1^2$.\\
The power of the solar radiation at time t is given by:
$P(t) = I(t) * A * (1 - a)$
where $I(t)$ is the intensity of the solar radiation at time $t$ and $a$ is the albedo of the iron ball, which is the fraction of the radiation that is reflected. Assuming the iron ball has an albedo of 0.1, we have:
$P(t) = I(t) * \pi * 1^2 * 0.9$.
The intensity of the solar radiation at time t is given by:
$$I(t) = I_0 * (r_0 / r(t))^2$$
where $I_0$ is the intensity of the solar radiation at the Earth's orbit, $r_0$ is the distance of the Earth's orbit from the sun, and $r(t)$ is the distance of the iron ball from the sun at time t. Assuming $I_0 = 1361  \mathrm{W}/\mathrm{m}^2$ and $r_0 = 149.6 \mathrm{\ million\ km}$, we have:
$$I(t) = 1361 \mathrm{W}/\mathrm{m}^2 * (149.6 \mathrm{\ million\ km} / (149.6 \mathrm{\ million\ km} - v * t))^2$$
Taking integral over $0$ to $t$, we can find the total heat absorbed by the iron ball at time $t$:
%$$Q = \int_0^t Q(t) dt.$$
%$$Q = \int_0^t P(t) * A dt.$$
%$$Q = \int_0^t I(t) * \pi * 1^2 * 0.9 dt.$$
%$$Q = 0.9 * \pi * I_0 * r_0^2 * \int_0^t (1 / (r_0 - v * t)^2) dt.$$
%$$Q = 0.9 * \pi * I_0 * r_0^2 * (v / (r_0 - v * t) - v / r_0). $$
%$$Q = 0.9 * \pi * I_0 * r0 * v * (1 - r_0 / (r_0 - v * t)).$$
%Substituting the values of $I_0$, $r_0$, and $v$, we get:
% Q = 0.9 * \pi * 1361 W/m^2 * 149.6 million km * v * (1 - 149.6 million km / (149.6 million km - v * t))
% Now we can plug in the values of Q, m, and c into the equation for T and get:
% T = 15 °C + 0.9 * pi * 1361 W/m^2 * 149.6 million km * v * (1 - 149.6 million km / (149.6 million km - v * t)) / (4/3 * pi * 1^3 * 7.8 * 10^6 * 0.45)
% To find the time and speed required to reach this distance, we can use the equation for t and solve for v: t = (r0 - d) / v, v = (r0 - d) / t
% Using d = 1 km, we get:v = (149.6 million km - 1 km) / t
% To find the value of t that corresponds to the melting point of iron, we can set T = 1538 °C and solve for t:
% 1538 °C = 15 °C + 0.9 * pi * 1361 W/m^2 * 149.6 million km * v * (1 - 149.6 million km / (149.6 million km - v * t)) / (4/3 * pi * 1^3 * 7.8 * 10^6 * 0.45)
...
}\\

{\bf ChatGPT:} \\
{\scriptsize
We can start by using the equation for kinetic energy to determine the speed of the iron ball. Kinetic energy is given by the equation: $\mathrm{KE} = 1/2 * m * v^2$ where $\mathrm{KE}$ is the kinetic energy, $m$ is the mass of the iron ball, and $v$ is its velocity. Since we want the iron ball to be able to travel 1 km closer to the Sun without melting, we can assume that its kinetic energy will be equal to the amount of heat energy required to raise the temperature of the iron ball by its melting point.
Next, we will use the formula for heat energy which is $Q=mc\Delta T$ where Q is heat energy, m is the mass, c is the specific heat of the substance and $\Delta T$ is the temperature change.
We can then equate the two equations to find the velocity required.
$1/2 * m * v^2 = mc \Delta T$
Solving for $v$, $v = \sqrt{2mc\Delta T} / m$
...
}
\end{AIbox}
%\caption{}
\end{figure}

 The question is not completely mathematically well-defined, thus requiring the model to make (reasonable) assumptions to solve. As discussed at the beginning of Section~\ref{sec:math}, we see that {\DV} applies the correct reasoning while ChatGPT's answer is not coherent with the question.
 %From \DV's answer, we can clearly see that the model tries to apply quantitative reasoning. it tries to apply the formula to write the temperature increase in terms of the amount of heat the ball absorbed, and relates the heat with the distance to the sun. \DV \ then correctly takes an integral over time to find the total temperature change. 
%It tries to fill in the missing information 
%by assuming simple, yet reasonable exponential models of the growth of the population and the survival rate. 
%Although the reasoning of \DV \ is not perfect due to calculation errors, we still view it as a big leap compared to the previous generation of models.  
\begin{comment}
one possible method is to use a simple model of exponential growth and assume that the birth and death rates are constant over time. This is not very realistic, but it might give a rough estimate.
One way to write an exponential growth model is: P(t) = P(0) * e^(rt)
where P(t) is the population at time t, P(0) is the initial population, e is the base of the natural logarithm, and r is the growth rate. We can use the given data to find r by plugging in P(0) = 1000, P(100) = 10000, and t = 100: 10000 = 1000 * e^(r*100).
Solving for r, we get: r = ln(10) / 100
r is approximately 0.0231.
Now, to find the number of people with an age between 40 and 50, we need to estimate the proportion of the population that falls in that age group. One way to do this is to assume that the population has a stable age distribution, meaning that the proportion of people in each age group is constant over time. This is also not very realistic, but it might give a rough estimate.
To find the stable age distribution, we need to know the survival function, which is the probability of surviving from birth to a given age. We can use the exponential growth model to find the survival function by assuming that the death rate is equal to the growth rate. This means that the population is in equilibrium, and that the number of births and deaths are equal. This is also not very realistic, but it might give a rough estimate.
The survival function is:
S(x) = e^(-rx)
where x is the age in years. This means that the probability of surviving from birth to age x is equal to e^(-rx).
To find the proportion of people in the age group 40 to 50, we need to find the probability of surviving from birth to age 40, and subtract the probability of surviving from birth to age 50. This is:
P(40 < x < 50) = S(40) - S(50). P(40 < x < 50) = e^(-r*40) - e^(-r*50)
Plugging in r = 0.0231, we get: P(40 < x < 50) = e^(-0.9239) - e^(-1.1549), P(40 < x < 50) = 0.3967 - 0.3156, P(40 < x < 50) = 0.0811
This means that about 8.11% of the population is in the age group 40 to 50. To find the number of people, we multiply this proportion by the total population at time 100, which is 10000:
N(40 < x < 50) = P(40 < x < 50) * P(100). N(40 < x < 50) = 0.0811 * 10000. N(40 < x < 50) = 811
Therefore, there are about 811 people with an age between 40 and 50 in the town.
\end{comment}
%On the other hand, ChatGPT fails to comprehend the question and makes completely nonsense reasoning based on some straightforward pattern matching.
\begin{comment} %Both answers are wrong
We then test the model with another example that, to the best of our knowledge, is not available on the internet:
\begin{figure}[H]
\begin{AIbox}{\DV \ vs ChatGPT}
{\bf Prompt:} \\
{\scriptsize
My family is from New York. I meet a random person in a mall in Los Angeles. What is the probability that we are fifth cousins and 
don't know it?
}\\

{\bf \DV:} \\
{\scriptsize
One possible set of assumptions and estimates is:
- A fifth cousin is someone who shares a pair of fourth-great-grandparents with us, or someone who is four generations removed from a common ancestor in the same generation as us.
- We each have 64 fourth-great-grandparents, assuming no inbreeding or missing links in our family trees. This means we have 64 pairs of potential fifth cousins on each side of our families, or 128 pairs in total.
- The average generation time in the US is about 25 years, meaning that our fourth-great-grandparents were born around 175 years ago, or around 1846.
- The US population in 1846 was about 21 million, and the New York population was about 2.6 million, or about 12.4\% of the total. Assuming that our ancestors were randomly distributed across the US at that time, the probability that any pair of our fourth-great-grandparents were from New York is about $0.124^2$, or about 0.0154.
- The probability that a random person in a mall in Los Angeles is from New York is about 0.03, based on the 2019 American Community Survey estimates of state-to-state migration flows.
- The probability that a random person in a mall in Los Angeles is our fifth cousin is equal to the probability that they are from New York times the probability that they share a pair of fourth-great-grandparents with us, given that they are from New York. This latter probability is hard to estimate, as it depends on how many descendants each pair of fourth-great-grandparents had, how many of them stayed in New York or moved elsewhere, how many of them married within or outside of their ethnic or religious groups, and how many of them can be traced through historical records. However, one possible way to get a rough estimate is to use the concept of a genetic or "effective" population size, which measures how many individuals contribute to the genetic diversity of a population. A smaller effective population size means more inbreeding and more shared ancestry, while a larger effective population size means less inbreeding and less shared ancestry. One study estimated that the effective population size of the US in the 19th century was about 3.5 million, meaning that the average US citizen in 1846 had about 3.5 million potential fourth-great-grandparents, or about 0.17\% of the total population. If we apply this estimate to the New York population, we get an effective population size of about 443,000, or about 0.021\% of the total population. This means that the probability that any pair of our fourth-great-grandparents were also the fourth-great-grandparents of a random New Yorker in 1846 is about $0.021\%^2$, or about 0.00000044. 
- Multiplying these probabilities together, we get a final estimate of about 0.00000044 x 0.03 x 0.0154, or about 0.0000000002, or 2 in 10 billion, that a random person in a mall in Los Angeles is our fifth cousin.
}\\

{\bf ChatGPT sample 1:} \\
{\scriptsize
It is very unlikely that you and a random person you meet in a mall in Los Angeles are fifth cousins and don't know it. In order to calculate the probability, we would need to know more information about the size of your family and the person's family, as well as how closely related your families are. Without this information, it is not possible to build a mathematical model to solve this problem.
}\\

{\bf ChatGPT sample 2:} \\
{\scriptsize
It is very difficult to accurately estimate the probability that two people are fifth cousins without more information. 
There are many factors that can affect the likelihood of two people being related, including their family histories and the size of their 
gene pool. 
Additionally, the probability of two people being related can vary significantly depending on the specific relationship in question. 
In general, the probability of two people being related decreases as the degree of cousinhood increases. 
In other words, it is more likely that two people are first cousins than it is that they are fifth cousins.
}
\end{AIbox}
%%\caption{}
\end{figure}

The example in question requires the model to construct mathematical models in order to estimate the number of fourth-great-grandparents a person might have, as well as their estimated birth-dates. By using the population data from that time period, the model can then estimate the probability of a collision. While ChatGPT seems unable to handle this question effectively, \DV \ is able to use the appropriate tools to arrive at an approximate answer.
\end{comment} 
%We test the model with another example that is not available on the internet:
%In the previous examples, ChatGPT did not demonstrate any quantitative reasoning. It did not even try to construct appropriate mathematical models for the question. The next example shows that even when ChatGPT does create a proper mathematical model, it often overlooks the main idea when contrasted with \DV.
We have another example that demonstrates the difference:
\begin{figure}[H]
\begin{AIbox}{\DV \ vs ChatGPT}
{\bf Prompt:} \\
{\scriptsize
I have an egg made of pure gold with 10 cm radius, I want to carry it home. How many plastic bags do I need to hold it?
}\\

{\bf \DV:} \\
{\scriptsize
- The volume of the egg is $V = (4/3)\pi r^3$, where $r$ is the radius. Plugging in $r = 10 \mathrm{cm}$, we get $V = 4188.79 \mathrm{cm}^3$.
- The density of pure gold is $\rho = 19.3 \mathrm{g}/\mathrm{cm}^3$, so the mass of the egg is $m = \rho V$. Plugging in the values, we get m = 80834.65 g, or about 80.8 kg.\\
- The tensile strength of a typical plastic bag is $\sigma$ = 20 MPa, or $20 \mathrm{N}/\mathrm{mm}^2$, which means it can withstand a force of 20 N per square millimeter of cross-sectional area before breaking. The thickness of a typical plastic bag is $t$ = 0.01 mm, or 0.001 cm, so the cross-sectional area of a plastic bag is $A = wt$, where $w$ is the width. Assuming that the plastic bag is rectangular and has a width of 30 cm, we get $A = 0.3 \mathrm{cm}^2$.\\
- The force exerted by the weight of the egg is $F = mg$, where $g$ is the acceleration due to gravity. Assuming that $g = 9.8 \mathrm{m}/\mathrm{s}^2$, we get $F = 791.62 N$.\\
- The number of plastic bags needed to hold the egg is $n = F/(\sigma A)$, where $\sigma A$ is the maximum force that one plastic bag can withstand. Plugging in the values, we get $n = 791.62/(20 \times 10^6 \times 0.3) = 0.00132$, or about $0.001$ bags.\\
However, this answer is not very realistic, because it implies that a fraction of a plastic bag can hold the egg, and that the plastic bag can stretch infinitely without losing strength. A more practical answer would take into account some factors such as: The shape and size of the plastic bag, and how well it can fit the egg without leaving too much empty space or creating too much stress at the corners or edges. The elasticity and durability of the plastic bag, and how much it can stretch or deform before breaking or tearing. The safety factor, or the ratio of the actual strength to the required strength, that is needed to account for possible variations in the quality of the plastic bag, the distribution of the weight of the egg, the impact of external forces, and the margin of error. The convenience and comfort of carrying the egg, and how many plastic bags can be easily handled without slipping, dropping, or hurting the hands.\\
Depending on these factors, the number of plastic bags needed to hold the egg could vary significantly, but a reasonable estimate might be somewhere between 10 and 20 bags, assuming that each bag can hold about 5 to 10 kg of weight, and that a safety factor of 2 to 4 is applied.
}\\

{\bf ChatGPT:} \\
{\scriptsize
To build a mathematical model to solve this problem, we first need to determine the volume of the egg. We can do this using the formula for the volume of a sphere, which is:
$V = (4/3) * \pi * r^3$
where $V$ is the volume of the sphere, $\pi$ is approximately 3.14, and $r$ is the radius of the sphere.
Plugging in the values from the problem, we get:
$V = (4/3) * 3.14 * (10\mathrm{cm})^3 = 4.19 \mathrm{cm}^3$.
Next, we need to determine the volume of a single plastic bag that you will use to hold the egg. Let's assume that each bag has a volume of 1 liter, or 1000 $\mathrm{cm}^3$.
Now, we can divide the volume of the egg by the volume of a single bag to determine how many bags we will need:
Number of bags = $V(\mathrm{egg}) / V(\mathrm{bag})$ = 4.19 $\mathrm{cm}^3$ / 1000 $\mathrm{cm}^3$ = 0.00419 bags
Since we cannot use a fraction of a bag, we will need to round up to the nearest whole number, so we will need at least 1 plastic bag to hold the egg.
}
\end{AIbox}
\end{figure}
In this example, concretely, ChatGPT failed to account for the importance of weight in determining whether a golden egg could be held inside a plastic bag. Instead, it relied solely on volume calculations, \textbf{which is the most common concern when holding things in bags, but it is not relevant to this question}. \DV, in contrast, correctly addresses the crux of this question by creating a physical model of the golden egg's weight and estimating the maximum weight a plastic bag could hold. Although \DV's answer is wrong due to calculation mistakes, \DV \ also demonstrated some adaptability, revising its conclusion when it proved to be problematic.
%demonstrate the difference between ChatGPT and {\DV}, which 
In the Appendix, we present more examples to support our conclusion that {\DV} possesses a higher level of quantitative reasoning than previous models such as ChatGPT. %Our conclusion is that {\DV} possesses a higher level of quantitative reasoning than ChatGPT, which enables it to solve real-world problems that involve math. ChatGPT, on the other hand, can only use math or apply mathematical formulas in a conventional setting. Therefore, tests of accuracy on standard math problem benchmarks do not fully capture the extent of {\DV}'s mathematical capabilities, as {\DV} is truly capable of quantitative reasoning compared to the more ``pattern matching'' style of models like ChatGPT.

\begin{comment}
\subsection{Creating new Math Problems with {\DV}}
Creating new math problems is a very important sign of understanding math, because it shows that one can apply the concepts, rules, and methods of math to novel situations, and that one can communicate them clearly and precisely. Creating new math problems also requires creativity, logic, and critical thinking, which are essential skills for any domain of knowledge.


In this section, we demonstrate some of {\DV}'s capabilities for generating new math problems based on existing ones and some natural language constraints, according to the following categories:
\begin{enumerate}
\item Content modification -- This category involves creating a math problem that has the same structure and logic as the original one, but with different names, objects, or values.
\item Difficulty enhancement -- This category involves creating a math problem that is more challenging than the original one, by adding more steps, complexity, or constraints.
\item Problem transformation -- This category involves creating a math problem that has a different domain or format than the original one, by changing the type of variables, operations, or representations.
\end{enumerate}

For each of the questions, we include one example. We leave more examples in the Appendix.

We  start  from  the  content  modification,  this  task  seems  to  be  relatively  straightforward  for  a  well-trained  NLG  model.  However,  we  demonstrate  that  even  for  this  seemingly  simple  task,  there  is  a  noticeable  difference  in  the  quality  of  the  modified  problem  when  comparing  {\DV}  to  ChatGPT.



\begin{figure}[H]

\begin{tcolorbox}[colback=white!5!white,adjusted title=Prompt]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Mrs. Gable’s third grade class is on a field trip to the beach. For lunch, Mrs. Gable brought 20 lunches for the 20 students in her class. She included a pack of animal crackers in each lunch bag for dessert. Each pack of animal crackers contained 10 animal crackers. If 2 students did not eat their animal crackers, how many animal crackers were eaten in total among Mrs. Gable’s students?
Can you modify the content in the problem to create a new one, and state the problem in a way that looks very different from the original one?
\end{minted}
\end{tcolorbox}

\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title=ChatGPT]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Mrs. Gable’s third grade class is on a field trip to the beach. They are having a picnic and she has brought 20 packs of animal crackers for the students to share. Each pack contains 10 animal crackers. If 2 students do not want to eat their animal crackers, how many animal crackers are left for the other 18 students to eat?
\end{minted}
\end{tcolorbox}

\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Mr. Lee took his fourth grade class to the zoo. He prepared 20 sandwiches for the 20 kids in his class. He also added a bag of pretzels to each sandwich for a snack. Each bag of pretzels had 10 pretzels inside. If 2 kids did not eat their pretzels, how many pretzels were consumed by Mr. Lee’s students altogether?
\end{minted}
\end{tcolorbox}
\end{figure}

Even for this simple example, we can see that ChatGPT did not understand ``were eaten in total" in the problem statement, and modified the problems to ``left for the student to eat", which is incorrect. ChatGPT also did not modify the objects in the Math problem that are unrelated to the solution. On the other hand, {\DV} shows an excellent understanding of the problem, isolating all the objects and their relations, and create an accurate modification.

We now move to increasing the difficulty of the Math problem:
\begin{figure}[H]

\begin{tcolorbox}[colback=white!5!white,adjusted title=Prompt]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Natasha has 3 times as much money as Carla, and Carla has twice as much money as Cosima. If Natasha has $60, and the three decide to buy goods worth the total amount they have and sell the goods at 7/5 of the buying price, how much profit would they make?
Can you generate a more difficult question built on top of this one by adding a sentence in the middle that includes the number 100?
\end{minted}
\end{tcolorbox}

\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title=ChatGPT]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Natasha has 3 times as much money as Carla, and Carla has twice as much money as Cosima. If Natasha has $60, and the three decide to pool their money together to buy goods that cost $100, and then sell the goods at 7/5 of the buying price, how much profit would they make if they split the profits equally among themselves?
\end{minted}
\end{tcolorbox}

\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Natasha has 3 times as much money as Carla, and Carla has twice as much money as Cosima. Natasha has $60. However, they can only buy goods from a store that offers a 20\% discount on purchases of $100 or more. If they buy as many goods as possible with their budget and sell the goods at 7/5 of the original price (before the discount), how much profit would they make?
\end{minted}
\end{tcolorbox}
\end{figure}

The question posed by {\DV} was much better than the one by ChatGPT, and required a deeper understanding of the mathematical problem and its difficulty level. ChatGPT simply added another sentence that made the problem easier, since it eliminated the need to calculate the total amount of money that the students pooled. However, {\DV} introduced a new element of complexity by adding a discount factor and specifying that the students wanted to maximize the number of goods they could buy. 

We also examine the capacity of {\DV} to transfer a problem to a different domain. This requires not only comprehending the original problem, but also grasping the new domain.

\begin{figure}[H]

\begin{tcolorbox}[colback=white!5!white,adjusted title=Prompt]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Problem: sin(x) = 0.88, what is sin(2x)? Can you write a new problem based on this that involves random variables, and the solution involves using this original problem?
\end{minted}
\end{tcolorbox}

\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title=ChatGPT]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Suppose X is a random variable that represents the value of sin(x). The probability distribution of X is such that P(X=0.88) = 0.2 and P(X=-0.88) = 0.2, and P(X=0) = 0.6. Let Y be a random variable that represents the value of sin(2x). Find the probability distribution of Y.
\end{minted}
\end{tcolorbox}

\begin{tcolorbox}[colback=white!5!white, enhanced, attach boxed title to top center={yshift=-3mm}, title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{tex}
Suppose X is a random variable that takes values in the interval [0, 2pi) with a uniform distribution. Let Y = sin(X) and Z = sin(2X). Find the probability that Z > 1.5 given that Y > 0.8
\end{minted}
\end{tcolorbox}
\end{figure}


\end{comment}
%\begin{comment}


\subsection{Limitations}

\DV \ is still far from perfect at solving math problems. \DV \ exhibits several typical mistakes in mathematical reasoning. We think that many of the mistakes are potentially due to the fundamental limitation of \emph{auto-regressive way of training}, and could not be easily mitigated. In this section, we examine these mistakes through a sequence of examples.% There are three types of basic mistakes that {\DV} makes: 1) arithmetic mistakes, 2) starting with a wrong conclusion, then drawing the target around the arrow, 3) unfamiliar math subjects.

\paragraph{Arithmetic mistakes:} Adding, subtracting, multiplying, or dividing numbers or expressions very often result in a mistake, even if it seems that the number of such mistakes has improved in comparison to ChatGPT. Our main observation here is that a central cause for those mistakes is the model's tendency to \emph{skip steps}. This is illustrated in the following example, where \DV \ skips a step in the calculation and makes an error:

\begin{AIbox}{\DV}\scriptsize
$$(x + 5)^2 - 2x + 7 = (2x - 4)^2 + (3x - 2)^2 - 8x + 7$$
Expanding the squares, we get:
$$x^2 + 10x + 25 - 2x + 7 = 4x^2 - 16x + 16 + 9x^2 - 12x + 4 - 8x + 7$$
Simplifying and collecting like terms, we get:
\fcolorbox{aired}{aired}{$-12x^2 + 34x + 12 = 0$}
\end{AIbox}

A common error that \DV \ makes is to manipulate terms incorrectly in one step, without showing any intermediate steps. This is understandable, since most mathematical articles also omit these steps, assuming that the reader can fill them in. However, the authors of these articles usually work out the intermediate steps on paper before writing the final result. \DV \ does not have this ability, as it only learns from the articles and tries to imitate their style.

We can see that \DV \ knows how to shift terms around and simplify if we ask it to be more careful:
\begin{figure}[H]
\begin{AIbox}{\DV}
{\bf Prompt:} \\
{\scriptsize
$x^2 + 10x + 25 - 2x + 7 = 4x^2 - 16x + 16 + 9x^2 - 12x + 4 - 8x + 7.$\\
Simplify the equation, try to move each term step by step. 
}\\

{\bf \DV:} \\
{\scriptsize
$x^2 + 10x + 25 - 2x + 7 = 4x^2 - 16x + 16 + 9x^2 - 12x + 4 - 8x + 7.$\\
Combine like terms on the left side: $x^2 + 8x + 32 = 4x^2 - 16x + 16 + 9x^2 - 12x + 4 - 8x + 7$\\
Combine like terms on the right side: $x^2 + 8x + 32 = 13x^2 - 36x + 27$\\
Subtract $x^2$ from both sides: $8x + 32 = 12x^2 - 36x + 27$\\
Subtract $8x$ from both sides: $32 = 12x^2 - 44x + 27$\\
Subtract $32$ from both sides: $0 = 12x^2 - 44x - 5$\\
}
\end{AIbox}
\end{figure}

{Can ``Let's think step by step'' solve the issue?} The ``skipping step'' seems to be solvable if we ask the model with the previously proposed prompt: ``Let's think step by step''. However, \textbf{we see that if we hide $(x + 5)^2 - 2x + 7 = (2x - 4)^2 + (3x - 2)^2 - 8x + 7$ as some intermediate steps of the question, then the model still thinks that ``solving $(x + 5)^2 - 2x + 7 = (2x - 4)^2 + (3x - 2)^2 - 8x + 7$'' is one intermediate step, and then still skips the step for simplification:}
\begin{figure}[H]
\begin{AIbox}{\DV}
{\bf Prompt:} \\
{\scriptsize
If Alice has $x$ apples, Bob and Bilbo also has $x$ apples. Suppose Alice gets 5 more apples, and then square her number of apples, then she loses $2x$ apple and buys another 7 apples. Suppose Bob double the apple then lose 4, and then Bob squares his number of apples. Suppose Bilbo triples the apple and loss 2, and then he also squares his number of apples. Now, Bob and Bilbo combine their apples together, and then loses 8x apple and buys 7 apples. They have the same amount of Apple as Alice now. What is $x$? \\
\textbf{Let's think step by step.}
}\\

{\bf \DV:} \\
{\scriptsize
Alice has $x + 5$ apples, then she squares it, so she has $(x + 5)^2$ apples, then she loses $2x$ apples, so she has $(x + 5)^2 - 2x$ apples, then she buys 7 apples, so she has $(x + 5)^2 - 2x + 7$ apples.
Bob has x apples, then he doubles it, so he has $2x$ apples, then he loses 4 apples, so he has $2x - 4$ apples, then he squares it, so he has $(2x - 4)^2$ apples.
Bilbo has x apples, then he triples it, so he has 3x apples, then he loses 2 apples, so he has $3x - 2$ apples, then he squares it, so he has $(3x - 2)^2$ apples.
Bob and Bilbo combine their apples, so they have $(2x - 4)^2 + (3x - 2)^2$ apples, then they lose 8x apples, so they have $(2x - 4)^2 + (3x - 2)^2 - 8x$ apples, then they buy 7 apples, so they have $(2x - 4)^2 + (3x - 2)^2 - 8x + 7$ apples.
They have the same amount of apples as Alice, so we can set up an equation:
$$(x + 5)^2 - 2x + 7 = (2x - 4)^2 + (3x - 2)^2 - 8x + 7$$
Expanding the squares and simplifying, we get:
$$x^2 + 10x + 25 - 2x + 7 = 4x^2 - 16x + 16 + 9x^2 - 12x + 4 - 8x + 7$$
Collecting like terms, we get:
\fcolorbox{aired}{aired}{$12x^2 - 34x - 20 = 0$}
}
\end{AIbox}
\end{figure}

To systematically test such calculation errors, we create the following synthetic task: We ask the model to write $\sum_{i \in [L]} a_i(b_ix + c_i)^2$ as $ax^2 + bx + c$ and calculate $|a| + |b| + |c|$. The prompt looks like:
\begin{figure}[H]
\begin{AIbox}{\DV}
{\bf Prompt:} \\
{\scriptsize
Problem: Write the expression: $+(5x-5)^2+(3x+5)^2+(3x+5)^2-(3x-5)^2-(1x-5)^2$ as $ax^2 + bx + c$, what is $\mathrm{abs}(a) + \mathrm{abs}(b) + \mathrm{abs}(c)$?\\
Let's think step by step. \\
\textbf{Try to write all the intermediate steps!}\\
\textbf{Try to be careful about plus-minus signs!}\\
\textbf{Try to merge the like terms one by one!}
}
{\bf \DV:} \\
{\scriptsize
First, we can expand the squares using the formula $(a+b)^2 = a^2 + 2ab + b^2$ and $(a-b)^2 = a^2 - 2ab + b^2$. We get:\\
$+(5x-5)^2+(3x+5)^2+(3x+5)^2-(3x-5)^2-(1x-5)^2$\\
$= (25x^2 - 50x + 25) + (9x^2 + 30x + 25) + (9x^2 + 30x + 25) - (9x^2 - 30x + 25) - (x^2 - 10x + 25)$\\
Next, we can combine the like terms by adding or subtracting the coefficients of the same powers of $x$. We get:\\
$= (25 + 9 + 9 - 9 - 1)x^2 + (-50 + 30 + 30 - (-30) - 10)x + (25 + 25 + 25 - 25 - 25)$\\
\fcolorbox{aired}{aired}{$= 33x^2 + 110x + 25$}\\
}
\end{AIbox}
\end{figure}
We can see that the model is still likely to skip steps \textbf{even if we ask it not to merge like terms in one shot. }
We test the model by choosing $L \in [5]$, and random sample each $a_i \in \{-1, 1\}, b_i, c_i \in \{-5, -4, \cdots, 4, 5\}$. The accuracy is shown in the following table:
\begin{center}
\begin{tabular}{c|ccccc}
\hline
Accuracy / Length & 1 & 2 & 3 & 4 & 5 \\
\hline
\DV & 98.1\% & 71.2\% & 59.1\% & 44.4\% & 34.6\% \\
text-davinci-003 & 51.5\% & 13.7\% & 3.9\% & 1.9\% & 1.0\% \\
\hline
\end{tabular}
\end{center}

The table above analyzes the performance of the LLMs on the task of a very simple algebra problem. Although \DV \ outperforms the previous model by a significant margin, we can see that as $L$ increases, the model is more likely to make a calculation mistake. We manually inspect $100$ instances of the mistake and find out that $\geq 90 \%$ of them are due to the skipping steps in merging like terms. It identifies a major difficulty that the model faces and poses a research question.
\begin{figure}[H] \begin{AIbox}{{\DV}}\vspace{-5px} \parbox{1\textwidth}{\scriptsize\begin{alltt} 
The large-scaled languange model \DV \ can merge like terms and perform the calculation correctly, but it often omits some steps, especially when combining the like terms. This results in low accuracy for the generated solutions. A fundamental challenge for this task is how to train the NLG models to show all steps \emph{in great detail} in the calculation. Humans tend to skip steps when writing mathematical proofs, so how can we teach the model to avoid this habit?
\end{alltt}}\vspace{-5px} \end{AIbox} 
\end{figure}



\paragraph{Counting errors:} It is reasonable to assume that LLMs struggle with counting. The precision required for accurate counting is difficult for these models to achieve, and the scarcity of counting examples in data sets only exacerbates the issue. Here we formally test how good \DV \ is for counting. We create a data set that contains a sequence of strings of the form $A_1, A_2, \cdots, A_L$. Where each $A_i$ is a sequence of random digits of length $k$. We ask the model to count the number of distinct elements in the sequence, with the answer range between $L/2$ and $L - 1$. Here is an example of $L = 5, k = 2$:
\begin{AIbox}{Prompt} \scriptsize
I have a sequence of numbers: 11, 23, 88, 42, 11. How many distinct numbers are there?\\
Let's think step by step.
\end{AIbox}
We tested the model with $L \in [5, 10, 15, 25]$ and $k = 2, 7, 12$. We obtain the following result:
\begin{figure}[H]
\centering
\begin{comment}
    

\end{comment}
\begin{tabular}{c|c|c|c|c|c|c|c|c|c|c|c|c}
\hline
$L$, $k$ &5,2&5,7&5,12&10,2&10,7&10,12&15,2&15,7&15,12&25,2&25,7&25,12\\
\hline
\DV&92.0\%&99.5\%&95.9\%&20.3\%&34.0\%&36.2\%&4.3\%& 7.5\%&30.3&12.8\%&1.6\%&22.0 \%\\
\hline
TD3&39.5\%&67.2\%&43.0\%&12.7\%&31.3\%&14.6\%&3.9\%&10.9\%&5.4\%&3.0\%&14.5\%&8.4\%\\
\hline
\end{tabular}

\end{figure}


Though \DV's counting ability is a big leap compared to the previous model for short sequences, a significant drop in \DV's accuracy still occurs as the sequence length grows from 5 to 10, indicating that it has a much lower counting capacity than humans. Interestingly, the model is more accurate with large numbers (12) than with small one (2). Since counting is a basic requirement for many mathematical applications, and a straightforward string-matching algorithm can achieve it, this suggests that the model's performance could be improved by integrating it with a counting API.

\paragraph{Reverse reasoning and verification}


A common feature of human mathematical articles is to present the answer before the reasoning, such as ``we will now show that $x = 0$ is a solution ...'' or ``We are going to prove the claim: AC is perpendicular to BD''. This can enhance the readability of the article by informing the reader of the conclusion before the lengthy reasoning steps. However, this writing style poses a challenge for the natural language generation model, as it requires the model to infer the answer first and then justify it later. We observed that \DV \ learned this feature from humans, but with a significant drawback: \textbf{even when it infers a clearly wrong answer at the start, it will still attempt to create justifications for it, instead of correcting it}. This may be due to the fact that human articles are always consistent, and \DV \ tries to emulate that pattern.

In Figure \ref{fig:math-justification}, we can see that when \DV \ starts with a wrong conclusion, instead of correcting it, it tries to come up with horribly wrong proofs such as $2 \leq 0$ in order to justify the conclusion. This is potentially due to that the model put more attention to matching the conclusion, instead of checking the local consistency of the logic (arguably, the math articles online also often contain logical errors in the intermediate reasoning, but the steps always try to support the conclusion). 
 On the other hand, if the model thinks about the problem ``forwardly'' by writing down the steps first and then drawing the conclusion, the model can correctly solve it. A fundamental question we ask at the end of this section is:
\begin{quote}
The order we write is not the order we think. How do we teach LLMs the order we think by reproducing what we write?
\end{quote}

\begin{figure}[H]
\begin{AIbox}{\DV}
{\bf Prompt:} \\
{\scriptsize
Find all positive integers $x$ are that $x-1 \leq 0$.
}\\

{\bf \DV:} \\
{\scriptsize
\fcolorbox{aired}{aired}{There are no positive integers $x$ that satisfy the inequality $x-1 \leq 0$.}\\
To see this, suppose for a contradiction that there is some positive integer $x$ such that $x-1 \leq 0$. Then adding $1$ to both sides of the inequality, we get $x \leq 1$. But since $x$ is a positive integer, it must be at least $1$, so the only possibility is that $x = 1$. However, plugging in $x = 1$ into the original inequality, we get $1-1 \leq 0$, which simplifies to $0 \leq 0$. This is true, but it is not a strict inequality, so it does not satisfy the original condition. Therefore, we have reached a contradiction, and there are no positive integers $x$ that satisfy $x-1 \leq 0$.
}
\tcbline
{\bf Prompt:} \\
{\scriptsize
Find all positive integers $x$ are that $x-1 \leq 0$.\\
There is one positive integer $x$ that satisfy the inequality $x-1 \leq 0$. 
}\\

{\bf \DV:} \\
{\scriptsize
That is $x = 1$.\\
To see why, note that if $x > 1$, then $x-1 > 0$, which contradicts the inequality. \\
On the other hand, if $x < 1$, then $x$ is not a positive integer, since positive integers are greater than or equal to 1 by definition. \\
Therefore, $x = 1$ is the only positive integer that satisfies the inequality $x-1 \leq 0$.
}
\tcbline
{\bf Prompt:} \\
{\scriptsize
Find all positive integers $x$ are that $x-1 \leq 0$.\\
There are three positive integers $x$ that satisfy the inequality $x-1 \leq 0$. 
}\\

{\bf \DV:} \\
{\scriptsize
They are:\\

- $x=1$, since $1-1=0$ and $0 \leq 0$.\\
- $x=2$, since $2-1=1$ and $1 \leq 0$.\\
- $x=3$, since $3-1=2$ and $2 \leq 0$.\\

Any other positive integer $x$ would have $x-1 \geq 1$, which would not satisfy the inequality. Therefore, the only positive integers $x$ that are $x-1 \leq 0$ are $x=1,2,3$.
}
\tcbline
{\bf Prompt:} \\
{\scriptsize
Find all positive integers $x$ are that $x-1 \leq 0$. \\
We can approach the problem
}\\

{\bf \DV:} \\
{\scriptsize
by rearranging the inequality as follows:
\begin{align*}
x-1 &\leq 0 \\
x &\leq 1
\end{align*}
This means that $x$ must be less than or equal to $1$ to satisfy the inequality. The only positive integer that meets this condition is $x=1$. Therefore, the solution is $x=1$.
}
\end{AIbox}
\caption{Starting with a wrong conclusion.}
\label{fig:math-justification}
\end{figure}

%\paragraph{Drawing the target around the arrow} is a type of logical fallacy that {\DV} sometimes commits when trying to justify its answer. For example, in the problem "If x + 3 = 7, what is x?", {\DV} might start by assuming that x = 4, then work backwards to show that 4 + 3 = 7, and conclude that x = 4 is the correct answer. However, this is not a valid way of solving the problem, because {\DV} is not actually testing whether x = 4 is a solution, but rather confirming its own assumption. A better way of solving the problem is to start with the given equation, x + 3 = 7, and isolate x by subtracting 3 from both sides, x + 3 - 3 = 7 - 3, which simplifies to x = 4. This way, {\DV} is actually finding the value of x that makes the equation true, not just picking a value that works.

%\paragraph{Counting errors} are mistakes in keeping track of the number of items, digits, places, or steps in a problem. They are seemingly related to arithmetic mistakes but are fundamentally different. For example, in the problem "How many fingers do you have?", {\DV} might answer 11 instead of 10, or in the problem "How many zeros are in one million?", {\DV} might answer 5 instead of 6. These mistakes are often caused by carelessness, distraction, or confusion, and they can affect the accuracy and validity of {\DV}'s answer. To avoid counting errors, {\DV} should pay attention to the details of the problem, use tools such as fingers, paper, or a calculator to help with counting, and double-check its answer before submitting it.

%\paragraph{Unfamiliar math subjects} are topics that {\DV} has not learned or encountered before, and therefore cannot solve or explain. For example, {\DV} might not know how to deal with fractions, decimals, percentages, exponents, roots, algebra, geometry, trigonometry, calculus, statistics, or any other advanced or specialized math concepts. In these cases, {\DV} might give a wrong or nonsensical answer, or simply say that it does not know how to solve the problem. This is a limitation of {\DV}'s current knowledge and training, and it could be improved by exposing {\DV} to more math problems and explanations from different sources and levels of difficulty.


\begin{comment}
\begin{figure}[H]
\begin{tcbitemize}[raster columns=1,aibox]
\tcbitem[title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{latex}
Let p(x) be a cubic polynomial such that $p(2)=0, p(-1)=0, p(4)=6$ and $p(5)=8$, find $p(7)$.
\end{minted}
\vspace{-\belowdisplayskip}\vspace{-\abovedisplayskip}
\begin{minted}[breaklines, breaksymbol=, fontsize=\tiny, bgcolor=aigreen, highlightcolor=pink, highlightlines={23}]{latex}
There are different methods to find a cubic polynomial that satisfies the given conditions, but one possible way is to use the fact that if $p(2)=0$ and $p(-1)=0$, then $(x-2)$ and $(x+1)$ are factors of $p(x)$. Therefore, we can write $p(x)$ as:

$$p(x) = (x-2)(x+1)q(x)$$

where $q(x)$ is some linear polynomial of the form $q(x) = ax + b$. To find $a$ and $b$, we can use the other two conditions:

$$p(4) = (4-2)(4+1)q(4) = 6 \implies 10q(4) = 6 \implies q(4) = \frac{3}{5}$$
$$p(5) = (5-2)(5+1)q(5) = 8 \implies 18q(5) = 8 \implies q(5) = \frac{4}{9}$$

Now, we can use the method of elimination to solve for $a$ and $b$:

$$\begin{aligned}
q(4) &= \frac{3}{5} = 4a + b \\
q(5) &= \frac{4}{9} = 5a + b
\end{aligned}$$

Subtracting the first equation from the second, we get:

$$a = \frac{4}{9} - \frac{3}{5} = -\frac{7}{45}$$

Substituting this value into either equation, we get:

$$b = \frac{3}{5} - 4a = \frac{3}{5} + \frac{28}{45} = \frac{43}{45}$$

Therefore, we have:

$$q(x) = -\frac{7}{45}x + \frac{43}{45}$$

and

$$p(x) = (x-2)(x+1)\left(-\frac{7}{45}x + \frac{43}{45}\right)$$

To find $p(7)$, we simply plug in $x=7$ and simplify:

$$\begin{aligned}
p(7) &= (7-2)(7+1)\left(-\frac{7}{45}(7) + \frac{43}{45}\right) \\
&= (5)(8)\left(-\frac{49}{45} + \frac{43}{45}\right) \\
&= 40\left(-\frac{6}{45}\right) \\
&= -\frac{16}{3}
\end{aligned}$$

Therefore, $p(7) = -\frac{16}{3}$.
\end{minted}


\end{tcbitemize}
\caption{Arithmetic error highlighted in red.}
\end{figure}

\begin{figure}[H]
\begin{tcbitemize}[raster columns=1,aibox]
\tcbitem[title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{latex}
Here is a list of numbers:

1103, 1109, 1117, 1123, 1129, 1151, 1153, 1163, 1171, 1181, 1187, 1193, 1201, 1213, 1217, 1223, 1229, 1231, 1237, 1249, 1259, 1277, 1279, 1283, 1289, 1291, 1297, 1301, 1303, 1307, 1319, 1321, 1327, 1361, 1367, 1373, 1381, 1399, 1409, 1423, 1427, 1429, 1433, 1439, 1447, 1451, 1453, 1459, 1471, 1481, 1483, 1487, 1489, 1493, 1499, 1511, 1523, 1531, 1543, 1549, 1553, 1559, 1567, 1571, 1579, 1583, 1597, 1601, 1607, 1609, 1613, 1619, 1621, 1627, 1637, 1657, 1663, 1667, 1669, 1693, 1697, 1699, 1709, 1721, 1723, 1733, 1741, 1747, 1753, 1759, 1777, 1783, 1787, 1789, 1801, 1811, 1823, 1831, 1847, 1861, 1867, 1871, 1873, 1877, 1879, 1889, 1901, 1907, 1913, 1931, 1933, 1949, 1951, 1973, 1979, 1987, 1993, 1997, 1999, 2003, 2011, 2017, 

Question: How many numbers are there in this list?
\end{minted}
\vspace{-\belowdisplayskip}\vspace{-\abovedisplayskip}
\begin{minted}[breaklines, breaksymbol=, fontsize=\tiny, bgcolor=aigreen, highlightcolor=pink, highlightlines={1}]{latex}
Answer: there are in total 100 numbers in this list. 
One way to verify this is to count the commas between the numbers, which are 99, and then add one for the last number. Alternatively, one can use a calculator or a spreadsheet to count the number of cells or entries in the list.
\end{minted}
\end{tcbitemize}
\caption{Counting errors highlighted in red.}
\end{figure}




\begin{figure}[H]
\begin{tcbitemize}[raster columns=2,aibox]
\tcbitem[title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{latex}
Find all positive integers $x$ are that $x-1 \leq 0$.
\end{minted}
\vspace{-\belowdisplayskip}\vspace{-\abovedisplayskip}
\begin{minted}[breaklines, breaksymbol=, fontsize=\tiny, bgcolor=aigreen, highlightcolor=pink, highlightlines={1}]{latex}
There are no positive integers $x$ that satisfy the inequality $x-1 \leq 0$. 
To see this, suppose for a contradiction that there is some positive integer $x$ such that $x-1 \leq 0$. Then adding $1$ to both sides of the inequality, we get $x \leq 1$. But since $x$ is a positive integer, it must be at least $1$, so the only possibility is that $x = 1$. However, plugging in $x = 1$ into the original inequality, we get $1-1 \leq 0$, which simplifies to $0 \leq 0$. This is true, but it is not a strict inequality, so it does not satisfy the original condition. Therefore, we have reached a contradiction, and there are no positive integers $x$ that satisfy $x-1 \leq 0$.
\end{minted}
\tcbitem[title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny]{latex}
Find all positive integers $x$ are that $x-1 \leq 0$.
There is one positive integer $x$ that satisfy the inequality $x-1 \leq 0$. 
\end{minted}
\vspace{-\belowdisplayskip}\vspace{-\abovedisplayskip}
\begin{minted}[breaklines, breaksymbol=, fontsize=\tiny, bgcolor=aigreen]{latex}
That is $x = 1$.
To see why, note that if $x > 1$, then $x-1 > 0$, which contradicts the inequality. 
On the other hand, if $x < 1$, then $x$ is not a positive integer, since positive integers are greater than or equal to 1 by definition. 
Therefore, $x = 1$ is the only positive integer that satisfies the inequality $x-1 \leq 0$.
\end{minted}

\tcbitem[title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny, escapeinside=~~]{latex}
Find all positive integers $x$ are that $x-1 \leq 0$.
There are three positive integers $x$ that satisfy the inequality $x-1 \leq 0$. 
\end{minted}
\vspace{-\belowdisplayskip}\vspace{-\abovedisplayskip}
\begin{minted}[breaklines, breaksymbol=, fontsize=\tiny, bgcolor=aigreen]{latex}
They are:

- $x=1$, since $1-1=0$ and $0 \leq 0$.
- $x=2$, since $2-1=1$ and $1 \leq 0$.
- $x=3$, since $3-1=2$ and $2 \leq 0$.

Any other positive integer $x$ would have $x-1 \geq 1$, which would not satisfy the inequality. Therefore, the only positive integers $x$ that are $x-1 \leq 0$ are $x=1,2,3$.
\end{minted}

\tcbitem[title={\DV}]
\begin{minted}[breaklines, breaksymbol=,  fontsize=\tiny, escapeinside=~~]{latex}
Find all positive integers $x$ are that $x-1 \leq 0$. 
We can approach the problem
\end{minted}
\vspace{-\belowdisplayskip}\vspace{-\abovedisplayskip}
\begin{minted}[breaklines, breaksymbol=, fontsize=\tiny, bgcolor=aigreen]{latex}
by rearranging the inequality as follows:

\begin{align*}
x-1 &\leq 0 \\
x &\leq 1
\end{align*}

This means that $x$ must be less than or equal to $1$ to satisfy the inequality. The only positive integer that meets this condition is $x=1$. Therefore, the solution is $x=1$.
\end{minted}
\end{tcbitemize}
\caption{Starting with a wrong conclusion.}
\end{figure}
\end{comment}



\newpage
\bibliographystyle{alpha}
\bibliography{mainbib}

\newpage
\addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
% Where are these sections are used?
%\input{contents/appendixA} \label{sec:appendixA}
%\input{contents/appendixB} \label{sec:appendixB}

\include{contents/math_appendix}


\end{document}