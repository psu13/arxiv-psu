%-------------------------------------------------------------------%
%-------------------------------------------------------------------%
% Document Preamble                                                 %
%-------------------------------------------------------------------%
%-------------------------------------------------------------------%

\usepackage{amsmath,amsthm}

%-------------------------------------------------------------------%
% Fonts                                                             %
%-------------------------------------------------------------------%

\usepackage[LGR,T1]{fontenc} % LGR allows for Greek text input
\usepackage[utf8]{inputenc} 
\usepackage[lcgreekalpha,upint]{stix2} % For older TeX distributions, use stix rather than stix2
\usepackage{inconsolata}
\renewcommand{\in}{\smallin}
\renewcommand{\emptyset}{\varnothing}
\usepackage{enumerate}
\usepackage[papersize={7in, 10.0in}, left=.5in, right=.5in, top=1in, bottom=.9in]{geometry}
\usepackage{afterpage}
\usepackage{setspace}
\usepackage{xspace}
\setstretch{1.15}

\usepackage{CJKutf8} % Chinese, Japanese, and Korean

\newcommand{\Japanese}[1]{\begin{CJK}{UTF8}{min} \CJKfamily{goth} \mathchoice{\ensuremath{\text{\footnotesize #1}}}{\ensuremath{\text{\footnotesize #1}}}{\ensuremath{\text{\tiny #1}}}{\ensuremath{\text{\tiny #1}}} \begin{CJK}{UTF8}{min}} % Defines a macro to use Japanese (or any CJK) characters in math mode; font size adjusted to be closer to the standard size for math fonts, and mathchoice makes it so that subscripts etc. scale. It will probably be better to take a smaller size than "tiny" for the subsubscript style…though I can't forsee this being used much

% For よ we're lucky that there's a "small よ" in Japanese (ょ) which can improve subscript display

\newcommand{\yo}{\begin{CJK}{UTF8}{min} \CJKfamily{goth} \mathchoice{\ensuremath{\text{\footnotesize よ}}}{\ensuremath{\text{\footnotesize よ}}}{\ensuremath{\text{\footnotesize ょ}}}{\ensuremath{\text{\tiny ょ}}} \end{CJK}}

\def\cprime{\char"7E}

\renewcommand{\setminus}{\smallsetminus}

%-------------------------------------------------------------------%
%  Hyperlinks                                                       %
%-------------------------------------------------------------------%

\usepackage{imakeidx}
\usepackage{url} % Allows for printing of URLs with TeX symbols that normally wouldn't be printed such as "~"
\usepackage{hyperref}

\usepackage{xcolor}
\definecolor{love}{RGB}{128, 15, 37}
\definecolor{slate}{RGB}{42, 54, 59}

\hypersetup{
      colorlinks=true, %set true if you want colored links
      linktoc=all,     %set to all if you want both sections and sections linked
      linkcolor=blue,  %choose some color if you want links to stand out
      citecolor = blue,
      urlcolor=blue, % choose some color to set links to websites
      pdfencoding=unicode,
      bookmarksdepth=subsubsection,
 	  	pdfencoding=unicode,
      hypertexnames = true,
  }

%-------------------------------------------------------------------%
% PDF bookmarks                                                     %
%-------------------------------------------------------------------%

% Adds section numbers to PDF bookmarks
\usepackage{bookmark}
\bookmarksetup{
  numbered, 
  open,
}

%-------------------------------------------------------------------%
%  References                                                       %
%-------------------------------------------------------------------%


% Uses biblatex pacage for citations and sets basic global styling
%-------------------------------------------------------------------%

% citestyle=numeric
\usepackage[style=ieee-alphabetic,backend=biber,sorting=nyt,url=false,backref=true]{biblatex} % url=false removes '[Online] Available: _repetition of DOI_'
\AtEveryBibitem{\clearfield{issn}} % Removes ISSN (retains ISBN)
\AtEveryCitekey{\clearfield{issn}}
\AtBeginBibliography{\small} % Sets references font size
\renewcommand*{\bibnamedash}{\underline{\hspace{3em}}\kern 0.1em} % Uses an underline when an author has multiple publications (in line with the AMS style)
\renewcommand{\multicitedelim}{\addsemicolon\space} % Uses a semicolon delimeter for multiple citations
\DeclareFieldFormat{postnote}{#1} % Removes the "p." when just a number is referenced
\DeclareFieldFormat[article,inbook,incollection,inproceedings,patent,thesis,unpublished]
  {title}{\textit{#1\isdot}}     % Uniformly italicizes title of all works
\DeclareFieldFormat{journaltitle}{#1}  % Makes Journal title in normal text
\DeclareFieldFormat[book,inbook,incollection,inproceedings]{series}{#1} % Takes away the "ser." in front of Series Title that is part of the ieee styling

% Definition of various links to make it easy to hyperlink to the Stacks project and the books of Jacob
%-------------------------------------------------------------------%

\newcommand{\stackslink}[1]{\href{http://stacks.math.columbia.edu/tag/#1}{#1}} % For use with multiple references

\newcommand{\kerodonlink}[1]{\href{http://kerodon.net/tag/#1}{#1}} % For use with multiple references

% Part Links
\newcommand{\SAGpartlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#part.#1}{#1}}

% Chapter Links
\newcommand{\HTTchlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#chapter.#1}{#1}}
\newcommand{\HAchlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#chapter.#1}{#1}}
\newcommand{\SAGchlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#chapter.#1}{#1}}

% Appendix Links
\newcommand{\HTTapplink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#appendix.#1}{#1}}
\newcommand{\HAapplink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#appendix.#1}{#1}}
\newcommand{\SAGapplink}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#appendix.#1}{#1}}

% Section Links
\newcommand{\HTTseclink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#section.#1}{#1}}
\newcommand{\HAseclink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#section.#1}{#1}}
\newcommand{\SAGseclink}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#section.#1}{#1}}

% Subsection Links
\newcommand{\HTTsubseclink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#subsection.#1}{#1}}
\newcommand{\HAsubseclink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#subsection.#1}{#1}}
\newcommand{\SAGsubseclink}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#subsection.#1}{#1}}

% Theorem/Lemma/Definition/etc. Links
\newcommand{\HTTthmlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#theorem.#1}{#1}}
\newcommand{\HAthmlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#theorem.#1}{#1}}
\newcommand{\HAappthmlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#atheorem.#1}{#1}} % Appendix theorems are numbered differently
\newcommand{\SAGthmlink}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#theorem.#1}{#1}}

% Page Links
\newcommand{\HTTpagelink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#page.#1}{#1}}
\newcommand{\HApagelink}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#page.#1}{#1}}
\newcommand{\SAGpagelink}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#page.#1}{#1}}

% Definition of various references to make it easy to hyperlink to the Stacks project and the books of Jacob
%-------------------------------------------------------------------%

\newcommand{\stackstag}[1]{\href{http://stacks.math.columbia.edu/tag/#1}{Tag #1}} %for single reference use

\newcommand{\kerodontag}[1]{\href{http://kerodon.net/tag/#1}{Tag #1}} %for single reference use

% Part Reference
\newcommand{\SAGpart}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#part.#1}{Part #1}}

% Chapter Reference
\newcommand{\HTTch}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#chapter.#1}{Chapter #1}}
\newcommand{\HAch}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#chapter.#1}{Chapter #1}}
\newcommand{\SAGch}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#chapter.#1}{Chapter #1}}

% Appendix Reference
\newcommand{\HTTapp}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#appendix.#1}{Appendix #1}}
\newcommand{\HAapp}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#appendix.#1}{Appendix #1}}
\newcommand{\SAGapp}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#appendix.#1}{Appendix #1}}

% Section Reference
\newcommand{\HTTsec}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#section.#1}{\S #1}}
\newcommand{\HAsec}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#section.#1}{\S #1}}
\newcommand{\SAGsec}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#section.#1}{\S #1}}

% Subsection Reference
\newcommand{\HTTsubsec}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#subsection.#1}{\S #1}}
\newcommand{\HAsubsec}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#subsection.#1}{\S #1}}
\newcommand{\SAGsubsec}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#subsection.#1}{\S #1}}

% Theorem/Lemma/Definition/etc. Reference
\newcommand{\HTTthm}[2]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#theorem.#2}{#1 #2}}
\newcommand{\HAthm}[2]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#theorem.#2}{#1 #2}}
\newcommand{\HAappthm}[2]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#atheorem.#2}{#1 #2}} % Appendix theorems are numbered differently
\newcommand{\SAGthm}[2]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#theorem.#2}{#1 #2}}

% Page Reference
\newcommand{\HTTpage}[1]{\href{http://www.math.ias.edu/~lurie/papers/HTT.pdf\#page.#1}{p. #1}}
\newcommand{\HApage}[1]{\href{http://www.math.ias.edu/~lurie/papers/HA.pdf\#page.#1}{p. #1}}
\newcommand{\SAGpage}[1]{\href{http://www.math.ias.edu/~lurie/papers/SAG-rootfile.pdf\#page.#1}{p. #1}}

% Quick Citation command for citing a single theorem, lemma, etc. 
%-------------------------------------------------------------------%

% Use: for stacks \stacks{Tag Number}, for HTT/HA/SAG, e.g., \HTT{Environment name}{Number}

\newcommand{\stacks}[1]{\cite[\stackstag{#1}]{stacksproject}}
\newcommand{\kerodon}[1]{\cite[\kerodontag{#1}]{Kerodon}}
\newcommand{\HTT}[2]{\cite[\HTTthm{#1}{#2}]{HTT}}
\newcommand{\HA}[2]{\cite[\HAthm{#1}{#2}]{HA}}
\newcommand{\HAa}[2]{\cite[\HAappthm{#1}{#2}]{HA}} % For theorems in the appendix of HA because the numbering is different
\newcommand{\SAG}[2]{\cite[\SAGthm{#1}{#2}]{SAG}}


%-------------------------------------------------------------------%
%  cleveref                                                         %
%-------------------------------------------------------------------%

\usepackage[noabbrev,nameinlink]{cleveref}		% Uses cleveref package to cite things in the text with names
	\crefname{section}{Chapter}{Chapters}
	\crefname{subsection}{\S\!}{\S\S\!}
	\crefname{axioms}{Axiom}{Axioms}
	\crefname{exercise}{Exercise}{Exercises}
	\crefname{exercisenum}{Exercise}{Exercises}
	\crefname{construction}{Construction}{Constructions}
	\crefname{problem}{Problem}{Problems}
	\crefname{theorem}{Theorem}{Theorems}
	\crefname{definition}{Definition}{Definitions}
	\crefname{proposition}{Proposition}{Propositions}
	\crefname{lemma}{Lemma}{Lemmas}
	\crefname{lem}{Lemma}{Lemmas}
	\crefname{remark}{Remark}{Remarks}
	\crefname{example}{Example}{Examples}
	\crefname{examplealph}{Example}{Examples}
	\crefname{corollary}{Corollary}{Corollaries}
	\crefname{nonexample}{Nonexample}{Nonexamples}
	\crefname{subappendix}{\S\!}{\S\S\!}
	\crefname{part}{Part}{Parts}
	\crefname{notation}{Notation}{Notations}
	\crefname{thm}{Theorem}{Theorems}
	\crefname{defn}{Definition}{Definitions}
	\crefname{cor}{Corollary}{Corollaries}
	\crefname{rmk}{Remark}{Remarks}
	\Crefname{rmk}{Remark}{Remarks}
	\Crefname{cor}{Corollary}{Corollaries}
	\crefname{conjecture}{Conjecture}{Conjectures}
	\Crefname{defn}{Definition}{Definitions}
	\Crefname{thm}{Theorem}{Theorems}
	\crefname{Notation}{Notation}{Notations}
	\Crefname{subappendix}{Section}{Sections}
	\Crefname{corollary}{Corollary}{Corollaries}
	\Crefname{axioms}{Axiom}{Axioms}
	\Crefname{exercise}{Exercise}{Exercises}
	\Crefname{exercisenum}{Exercise}{Exercises}
	\Crefname{construction}{Construction}{Constructions}
	\Crefname{problem}{Problem}{Problems}
	\Crefname{theorem}{Theorem}{Theorems}
	\Crefname{definition}{Definition}{Definitions}
	\Crefname{proposition}{Proposition}{Propositions}
	\Crefname{lemma}{Lemma}{Lemmas}
	\Crefname{lem}{Lemma}{Lemmas}
	\Crefname{remark}{Remark}{Remarks}
	\Crefname{example}{Example}{Examples}
	\Crefname{examplealph}{Example}{Examples}
	\Crefname{section}{Chapter}{Chapters}
	\Crefname{subsection}{Section}{Sections}
	\Crefname{summary}{Summary}{Summaries}
	\Crefname{attempt}{Attempt}{Attempts}
	\Crefname{part}{Part}{Parts}
	\Crefname{conjecture}{Conjecture}{Conjectures}

	% Has cref parenthesize "nul" references
  \crefformat{nul}{(#2#1#3)} % Has cref parenthesize "nul" references
	\crefname{nul}{}{}
	\Crefformat{nul}{(#2#1#3)}
	\Crefname{nul}{}{}


%-------------------------------------------------------------------%
% Environments                                                      %
%-------------------------------------------------------------------%

\renewcommand{\thesubsubsection}{\thesubsection.\alph{subsubsection}}
\numberwithin{equation}{subsection}

\swapnumbers % Changes environment style from "Theorem #" to "# Theorem"
\usepackage{etoolbox}
\usepackage{mathtools}

\patchcmd{\swappedhead}{(#3)}{\normalfont #3}{}{} % patch 2 uses
% Use 1: remove auto parenthesis in \begin{prop}[---]
% Use 2: avoid an issue with \sffamily and theoremstyles

\theoremstyle{definition}

\newtheorem{definition}[equation]{Definition}
\newtheorem{nul}[equation]{}
\newtheorem{protodefinition}[equation]{Proto-Definition}
\newtheorem{axiom}[equation]{Axiom}
\newtheorem{axioms}[equation]{Axioms}
\newtheorem{construction}[equation]{Construction}
\newtheorem{computation}[equation]{Computation}
\newtheorem{notation}[equation]{Notation}
\newtheorem{recollection}[equation]{Recollection}
\newtheorem{convention}[equation]{Convention}
\newtheorem{goal}[equation]{Goal}
\newtheorem{goals}[equation]{Goals}
\newtheorem{conventions}[equation]{Conventions}
\newtheorem{counterexample}[equation]{Counterexample}
\newtheorem{warning}[equation]{Warning}
\newtheorem{question}[equation]{Question}
\newtheorem{questions}[equation]{Questions}
\newtheorem{idea}[equation]{Idea}
\newtheorem{remark}[equation]{Remark}
\newtheorem{history}[equation]{Historical Remark}
\newtheorem{histories}[equation]{Historical Remarks}
\newtheorem{remarks}[equation]{Remarks}
\newtheorem{observation}[equation]{Observation}
\newtheorem{fact}[equation]{Fact}
\newtheorem{observations}[equation]{Observations}
\newtheorem{problem}[equation]{Problem}
\newtheorem{example}[equation]{Example}
\newtheorem{examples}[equation]{Examples}
\newtheorem{nonexample}[equation]{Nonexample}
\newtheorem{summary}[equation]{Summary}
\newtheorem{descriptionenv}[equation]{Description}
\newtheorem{exercise}[equation]{Exercise}
\newtheorem{property}[equation]{Property}
\newtheorem{properties}[equation]{Properties}
\newtheorem{attempt}[equation]{Attempt}
\newtheorem{application}[equation]{Application}
\newtheorem{applications}[equation]{Applications}

\newtheorem*{definition*}{Definition}
\newtheorem*{remark*}{Remark}

\theoremstyle{plain}

\newtheorem{theorem}[equation]{Theorem}
\newtheorem{prototheorem}[equation]{Proto-Theorem}
\newtheorem{claim}[equation]{Claim}
\newtheorem{proposition}[equation]{Proposition}
\newtheorem{lemma}[equation]{Lemma}
\newtheorem{sublemma}[equation]{Sublemma}
\newtheorem{conjecture}[equation]{Conjecture}
\newtheorem{conjectures}[equation]{Conjectures}
\newtheorem{corollary}[equation]{Corollary}

\newtheorem{thm}[equation]{Theorem}
\newtheorem{folk}[equation]{Folklore}
\newtheorem{hope}[equation]{Hope}
\newtheorem{prblm}[equation]{Problem}
\newtheorem{prop}[equation]{Proposition}
\newtheorem{cor}[equation]{Corollary}
\newtheorem{lem}[equation]{Lemma}
% \newtheorem{claim}[equation]{Claim}
\newtheorem*{outline}{Outline}
\newtheorem{ideas}[equation]{Ideas}

\newtheorem*{theorem*}{Theorem}


\theoremstyle{definition} 
\newtheorem{ex}[equation]{Example} 
\newtheorem*{sln}{Solution}
% \newtheorem*{fact}{Fact}
\newtheorem{defn}[equation]{Definition}
\newtheorem{nonex}[equation]{Non-Example}
\newtheorem{quest}[equation]{Question}
\newtheorem{obs}[equation]{Observation}


\newtheorem{rmk}[equation]{Remark}
\newtheorem{note}[equation]{Note}
\newtheorem{recall}[equation]{Recall}




%-------------------------------------------------------------------%
%  Graphics                                                         %
%-------------------------------------------------------------------%

\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{graphicx}
\usepackage[all,arc]{xy}
\SelectTips{cm}{10}



\usetikzlibrary{matrix,arrows,arrows.meta,bending,calc,decorations,decorations.pathmorphing,shapes}

  \tikzset{
    RRight/.tip={Glyph[glyph math command=arrowkitHeadright]},
    double distance={0.135em},
    commutative diagrams/.cd, 
    arrow style=tikz, 
  }

  % tip end  -- 1
  % back end -- 0.00512821
  % line end -- 0.774359
  % visual back end -- 0.574359
  % visual tip end -- 1
  \pgfdeclarearrow{
      name = minionto,
      parameters = { \the\pgfarrowlength\the\pgfarrowwidth},
      setup code = {
          % The different end values:
          \pgfarrowssettipend{\pgfarrowlength}
          \pgfarrowssetbackend{0.00512821\pgfarrowlength}
          \pgfarrowssetlineend{0.774369\pgfarrowlength}
          \pgfarrowssetvisualbackend{0.574359\pgfarrowlength}
          \pgfarrowssetvisualtipend{\pgfarrowlength}
          % The hull
          \pgfarrowsupperhullpoint{0cm}{0.914141\pgfarrowwidth}
          \pgfarrowsupperhullpoint{0cm}{0.469697\pgfarrowwidth}
          \pgfarrowsupperhullpoint{0.107692\pgfarrowlength}{\pgfarrowwidth}
          \pgfarrowshullpoint{0.574359\pgfarrowlength}{0cm}
          \pgfarrowshullpoint{\pgfarrowlength}{0cm}
          % Saves: the length and width
          \pgfarrowssavethe\pgfarrowlength
          \pgfarrowssavethe\pgflinewidth
      },
      drawing code = {
          \pgfpathmoveto{\pgfpoint{0cm}{-0.914141\pgfarrowwidth}}
          \pgfpathlineto{\pgfpoint{0.574359\pgfarrowlength}{0cm}}
          \pgfpathlineto{\pgfpoint{0cm}{0.914141\pgfarrowwidth}}        
          \pgfpathlineto{\pgfpoint{0.107692\pgfarrowlength}{\pgfarrowwidth}}
          \pgfpathcurveto{\pgfpoint{0.528205\pgfarrowlength}{0.5\pgfarrowwidth}}
                         {\pgfpoint{0.548718\pgfarrowlength}{0.469697\pgfarrowwidth}}
                         {\pgfpoint{\pgfarrowlength}{0cm}}
          \pgfpathcurveto{\pgfpoint{0.528205\pgfarrowlength}{-0.5\pgfarrowwidth}}
                         {\pgfpoint{0.548718\pgfarrowlength}{-0.469697\pgfarrowwidth}}
                         {\pgfpoint{0.107692\pgfarrowlength}{-\pgfarrowwidth}}
          \pgfpathclose
          \pgfusepathqfill
      },
      defaults = {length=0.22em, width=0.19em}
  }

  \pgfarrowsdeclarereversed{miniontail}{miniontail}{minionto}{minionto}

  \pgfdeclarearrow{
      name = minionhook,
      parameters = { \the\pgflinewidth},
      setup code = {
          \pgfmathsetlength{\pgfarrowlength}{4.48\pgflinewidth}
          \pgfarrowssetlineend{\pgflinewidth}
          \pgfarrowssettipend{\pgfarrowlength}
          % The hull
          \pgfarrowsupperhullpoint{0cm}{0.914141\pgflinewidth}
          \pgfarrowsupperhullpoint{0cm}{0.469697\pgflinewidth}
          \pgfarrowsupperhullpoint{0.107692\pgfarrowlength}{\pgflinewidth}
          \pgfarrowshullpoint{0.574359\pgfarrowlength}{0cm}
          \pgfarrowshullpoint{\pgfarrowlength}{0cm}
          % Saves: the length and width
          \pgfarrowssavethe\pgflinewidth
          \pgfarrowssavethe\pgfarrowlength
      },
      drawing code = {
          \pgfpathmoveto{\pgfpoint{0.25\pgfarrowlength}{-3.84\pgflinewidth}}
          \pgfpathlineto{\pgfpoint{0.25\pgfarrowlength}{-2.86\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.73660714\pgfarrowlength}{-2.86\pgflinewidth}}
                         {\pgfpoint{0.73660714\pgfarrowlength}{-1.9\pgflinewidth}}
                         {\pgfpoint{0.73660714\pgfarrowlength}{-1.6\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.73660714\pgfarrowlength}{-0.54\pgflinewidth}}
                         {\pgfpoint{0.35267857\pgfarrowlength}{-0.45\pgflinewidth}}
                         {\pgfpoint{0.0\pgfarrowlength}{-0.51\pgflinewidth}}
          \pgfpathlineto{\pgfpoint{0.0\pgfarrowlength}{0.5\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.97767857\pgfarrowlength}{0.7\pgflinewidth}}
                         {\pgfpoint{0.99107143\pgfarrowlength}{-1.2\pgflinewidth}}
                         {\pgfpoint{1.0\pgfarrowlength}{-1.6\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.95982143\pgfarrowlength}{-3.86\pgflinewidth}}
                         {\pgfpoint{0.39732143\pgfarrowlength}{-3.86\pgflinewidth}}
                         {\pgfpoint{0.25\pgfarrowlength}{-3.86\pgflinewidth}}
          \pgfpathclose
          \pgfusepathqfill
      },
      defaults = {length=0.22em, width=0.19em}
  }

  \pgfdeclarearrow{
      name = minionhook',
      parameters = { \the\pgflinewidth},
      setup code = {
          \pgfmathsetlength{\pgfarrowlength}{4.48\pgflinewidth}
          \pgfarrowssetlineend{\pgflinewidth}
          \pgfarrowssettipend{\pgfarrowlength}
          % The hull
          \pgfarrowsupperhullpoint{0cm}{0.914141\pgflinewidth}
          \pgfarrowsupperhullpoint{0cm}{0.469697\pgflinewidth}
          \pgfarrowsupperhullpoint{0.107692\pgfarrowlength}{\pgflinewidth}
          \pgfarrowshullpoint{0.574359\pgfarrowlength}{0cm}
          \pgfarrowshullpoint{\pgfarrowlength}{0cm}
          % Saves: the length and width
          \pgfarrowssavethe\pgflinewidth
          \pgfarrowssavethe\pgfarrowlength
      },
      drawing code = {
          \pgfpathmoveto{\pgfpoint{0.25\pgfarrowlength}{3.84\pgflinewidth}}
          \pgfpathlineto{\pgfpoint{0.25\pgfarrowlength}{2.86\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.73660714\pgfarrowlength}{2.86\pgflinewidth}}
                         {\pgfpoint{0.73660714\pgfarrowlength}{1.9\pgflinewidth}}
                         {\pgfpoint{0.73660714\pgfarrowlength}{1.6\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.73660714\pgfarrowlength}{0.54\pgflinewidth}}
                         {\pgfpoint{0.35267857\pgfarrowlength}{0.45\pgflinewidth}}
                         {\pgfpoint{0.0\pgfarrowlength}{0.51\pgflinewidth}}
          \pgfpathlineto{\pgfpoint{0.0\pgfarrowlength}{-0.5\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.97767857\pgfarrowlength}{-0.7\pgflinewidth}}
                         {\pgfpoint{0.99107143\pgfarrowlength}{1.2\pgflinewidth}}
                         {\pgfpoint{1.0\pgfarrowlength}{1.6\pgflinewidth}}
          \pgfpathcurveto{\pgfpoint{0.95982143\pgfarrowlength}{3.86\pgflinewidth}}
                         {\pgfpoint{0.39732143\pgfarrowlength}{3.86\pgflinewidth}}
                         {\pgfpoint{0.25\pgfarrowlength}{3.86\pgflinewidth}}
          \pgfpathclose
          \pgfusepathqfill
      },
      defaults = {length=0.22em, width=0.19em}
  }

  \tikzset{
    >/.tip={minionto},
    >->/.style = {miniontail-minionto},
    <-</.style = {minionto-miniontail},
    <->/.style = {minionto-miniontail},
    hooked/.style = {minionhook-minionto},
    hooked'/.style = {minionhook'-minionto},
  }

  \tikzset{
  RRight/.tip={Glyph[glyph math command=arrowkitHeadright]},
}

\pgfdeclaredecoration{single line}{initial}{\state{initial}[width=\pgfdecoratedpathlength-1sp]{\pgfpathmoveto{\pgfpointorigin}}\state{final}{\pgfpathlineto{\pgfpointorigin}}}

% Sets global tikzcd settings
\tikzcdset{  crossing over/.style={
    /tikz/preaction={
      /tikz/draw,
      /tikz/color=\pgfkeysvalueof{/tikz/commutative diagrams/background color},
      /tikz/arrows=-,
      /tikz/line width=\pgfkeysvalueof{/tikz/commutative
      diagrams/crossing over clearance}}}}

% borrowed from q.uiver.app
\tikzset{curve/.style={settings={#1},to path={(\tikztostart)
    .. controls ($(\tikztostart)!\pv{pos}!(\tikztotarget)!\pv{height}!270:(\tikztotarget)$)
    and ($(\tikztostart)!1-\pv{pos}!(\tikztotarget)!\pv{height}!270:(\tikztotarget)$)
    .. (\tikztotarget)\tikztonodes}},
    settings/.code={\tikzset{quiver/.cd,#1}
        \def\pv##1{\pgfkeysvalueof{/tikz/quiver/##1}}},
    quiver/.cd,pos/.initial=0.35,height/.initial=0}
