% Скобка под выражением
\newcommand{\UnderBrace}[2][0.5]{\vtop{\m@th\ialign{##\crcr
	$\displaystyle#2$\crcr\noalign{\kern#1pt\nointerlineskip}
	\tiny$\m@th\sss\mkern0.4mu\bracelu\mkern-0.4mu\leaders
	\vrule height0.59pt \hfill\leaders\vrule height0.59pt
	\hfill\braceru$\cr}}}
% Скобка над выражением
\newcommand{\OverBrace }[2][0.5]{\vbox{\m@th\ialign{##\cr
	\tiny$\m@th\sss\mkern0.4mu\braceld\mkern-0.4mu\leaders
	\vrule height0.59pt \hfill\leaders
	\vrule height0.59pt\hfill\bracerd$%
	\crcr\noalign{\kern#1pt\nointerlineskip}$\displaystyle#2$\cr}}}

\def\){\vcenter{\hbox{\small$\m@th\scs\mkern-2mu\left.\right\rgroup%
	\mkern-4mu$}}}
\newcommand{\smallc}[2][1]{\vcenter{\hbox{\smaller[#1]$#2$}}}

\renewcommand{\|}[1][0]{\vcenter{\hbox{% % улучшенный символ нормы;
	\ifcase#1$|\hspace{-0.18em}|$\or\small$\big|\hspace{-0.23em}\big|$
	\or$\big|\hspace{-0.24em}\big|$
	\or\large$\big|\hspace{-0.25em}\big|$
	\or \footnotesize$\Big|\hspace{-0.23em}\Big|$\or
	\small$\Big|\hspace{-0.23em}\Big|$\or$\Big|\hspace{-0.24em}\Big|$
	\or\large$\Big|\hspace{-0.24em}\Big|$
	\or$\bigg|\hspace{-0.22em}\bigg|$ \or
	\large$\bigg|\hspace{-0.22em}\bigg|$
	\or$\Bigg|\hspace{-0.23em}\Bigg|$\or
	\large$\Bigg|\hspace{-0.24em}\Bigg|$\or $\left|\vbox to4.8ex{}%
	\hspace{-0.23em}\right|$\else ${\left|\vbox to5.3ex{}%
	\hspace{-0.23em}\right|}$\fi}}{}\relax}

% Сбалансированная последовательность возрастающих скобок.
% TeX-скобки.tex; #1 = 0...13; \big=2 \mbig=4 \Big=6 \bigg=8 \Bigg=10
\newcommand{\mbig}[2][4]{\vcenter{\hbox{%
	\ifcase#1$#2$\or\small$\big#2$\or$\big#2$\or\large$\big#2$%
	\or\footnotesize$\Big#2$\or\small$\Big#2$\or$\Big#2$\or%
	\large$\Big#2$\or$\bigg#2$\or\large$\bigg#2$\or$\Bigg#2$\or%
	\large$\Bigg#2$\or$\left#2\vbox to4.8ex{}\right.$\else%
	${\left#2\vbox to5.3ex{}\right.}$\fi}}\relax}
