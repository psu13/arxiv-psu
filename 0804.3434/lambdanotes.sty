% ----------------------------------------------------------------------
% General layout

\textwidth 6.5in \textheight 9in
\oddsidemargin 0in \topmargin 0in \headheight 0in \headsep -.25in
\parskip=1ex \parindent=0pt

% ----------------------------------------------------------------------
% Packages

\usepackage{times}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{mathrsfs}                   % special script style

% ----------------------------------------------------------------------
% Theorems and proofs

\theoremstyle{plain}
\newtheorem{n-lemma}{Lemma}[section]
\newtheorem{n-theorem}[n-lemma]{Theorem}
\newtheorem{n-proposition}[n-lemma]{Proposition}
\newtheorem{n-corollary}[n-lemma]{Corollary}
\newtheorem*{un-theorem}{Theorem}

\theoremstyle{definition}
\newtheorem{n-exercise}{Exercise}
\newtheorem*{un-definition}{Definition}
\newtheorem*{un-convention}{Convention}

\theoremstyle{remark}
\newtheorem{n-example}[n-lemma]{Example}
\newtheorem{n-remark}[n-lemma]{Remark}

% defaults numbered/unnumbered
\newenvironment{theorem}{\begin{n-theorem}}{\end{n-theorem}}
\newenvironment{lemma}{\begin{n-lemma}}{\end{n-lemma}}
\newenvironment{proposition}{\begin{n-proposition}}{\end{n-proposition}}
\newenvironment{corollary}{\begin{n-corollary}}{\end{n-corollary}}
\newenvironment{definition}{\begin{un-definition}}{\end{un-definition}}
\newenvironment{example}{\begin{n-example}}{\end{n-example}}
\newenvironment{remark}{\begin{n-remark}}{\end{n-remark}}
\newenvironment{convention}{\begin{un-convention}}{\end{un-convention}}
\newenvironment{exercise}{\begin{n-exercise}}{\end{n-exercise}}

% proofs
\newenvironment{proofof}[1]             % loose proofs
        {\begin{trivlist}\item[]{\it Proof of #1:\hspace{.5em}}}
        {\end{trivlist}}

\renewcommand{\qed}{}                   % turn off automatic AMS-style \qed
\newcommand{\eotsymbol}{{$\Box$}}       % can be redefined
\newcommand{\eot}{{\hspace*{\fill}\eotsymbol}}
\newcommand{\eottwo}{\vspace{-4ex}\par\eot}       % \eot after math display

% ----------------------------------------------------------------------
% Alphabetic labels
{\makeatletter
\gdef\alphalabels{\def\theenumi{\@alph\c@enumi}\def\labelenumi{(\theenumi)}}}

% ----------------------------------------------------------------------
% Commands for linked enumerate environments
\newcounter{enumisave}
\newcounter{enumiisave}
\newcounter{enumiiisave}
\newcounter{enumivsave}
\newcommand{\suspendenumerate}{
        \setcounter{enumisave}{\value{enumi}}
        \setcounter{enumiisave}{\value{enumii}}
        \setcounter{enumiiisave}{\value{enumiii}}
        \setcounter{enumivsave}{\value{enumiv}}         }
\newcommand{\resumeenumerate}{
        \setcounter{enumi}{\value{enumisave}}
        \setcounter{enumii}{\value{enumiisave}}
        \setcounter{enumiii}{\value{enumiiisave}}
        \setcounter{enumiv}{\value{enumivsave}}         }

% ----------------------------------------------------------------------
% A hack: \m is similar to \vcenter, but works better.
% \mp{0.2}{x}: raise the box x so that 20% of it is below the
% centerline. Unlike \vcenter, don't change the horizontal spacing

\newlength{\localh}
\newlength{\locald}
\newbox\mybox
\def\mp#1#2{\setbox\mybox\hbox{#2}\localh\ht\mybox\locald\dp\mybox\addtolength{\localh}{-\locald}\raisebox{-#1\localh}{\box\mybox}}
\def\m#1{\mp{0.5}{#1}}

% ----------------------------------------------------------------------
% Macros

% Reductions and equivalences
\newcommand{\rrightarrow}{\mathrel{\rightarrow\!\!\!\!\!\rightarrow}}
\newcommand{\red}{\rightarrow}
\newcommand{\reds}{\rrightarrow}
\newcommand{\redb}{\rightarrow_{\beta}}
\newcommand{\rede}{\rightarrow_{\eta}}
\newcommand{\redbe}{\rightarrow_{\beta\eta}}
\newcommand{\redbs}{\rrightarrow_{\beta}}
\newcommand{\redes}{\rrightarrow_{\eta}}
\newcommand{\redbes}{\rrightarrow_{\beta\eta}}
\newcommand{\redc}{\rightarrow_{\it c}}
\newcommand{\redcs}{\rrightarrow_{\it c}}
\newcommand{\eqb}{=_{\beta}}
\newcommand{\eqe}{=_{\eta}}
\newcommand{\eqbe}{=_{\beta\eta}}
\newcommand{\eqc}{=_{\it c}}
\newcommand{\eqabs}{=_{\rm abs}}
\newcommand{\eqa}{=_{\alpha}}
\newcommand{\eqax}{=_{\rm ax}}
\newcommand{\eqop}{=_{\rm op}}
\newcommand{\eqden}{=_{\rm den}}
\newcommand{\sqleq}{\sqsubseteq}
\newcommand{\sqleqop}{\sqleq_{\rm op}}
\newcommand{\sqleqden}{\sqleq_{\rm den}}

% Reserved words
\newcommand{\nm}[1]{\mathop{\textbf{\bf #1}\,}}
\newcommand{\POR}{\nm{POR}}
\newcommand{\errort}{\nm{error}}
\newcommand{\boolt}{\nm{bool}}
\newcommand{\natt}{\nm{nat}}
\newcommand{\zerot}{\nm{zero}}
\newcommand{\andt}{\nm{and}}
\newcommand{\ort}{\nm{or}}
\newcommand{\nott}{\nm{not}}
\newcommand{\truet}{{\bf T}}
\newcommand{\falset}{{\bf F}}
\newcommand{\ifthenelset}{\nm{if\_then\_else}}
\newcommand{\ite}[3]{\nm{if}#1\nm{then}#2\nm{else}#3}
\newcommand{\succt}{\nm{succ}}
\newcommand{\predt}{\nm{pred}}
\newcommand{\addt}{\nm{add}}
\newcommand{\multt}{\nm{mult}}
\newcommand{\expt}{\nm{exp}}
\newcommand{\iszerot}{\nm{iszero}}
\newcommand{\Y}{{\bf Y}}
\newcommand{\Thetat}{\textbf{\boldmath $\Theta$}}
\newcommand{\factt}{\nm{fact}}
\newcommand{\leftt}{\proj1}
\newcommand{\rightt}{\proj2}
\newcommand{\nilt}{\nm{nil}}
\newcommand{\leaft}{\nm{leaf}}
\newcommand{\bool}{\nm{bool}}
\newcommand{\nat}{\nm{nat}}
\newcommand{\brancht}{\nm{branch}}
\newcommand{\nodet}{\nm{node}}
\newcommand{\treet}{\nm{tree}}
\newcommand{\mgu}{\mathop{\rm mgu}}
\newcommand{\typeinfer}{\mathop{\rm typeinfer}}

% Sets, tuples, functions
\newcommand{\s}[1]{\{#1\}}
\newcommand{\seq}{\subseteq}
\newcommand{\tuple}[1]{\langle#1\rangle}
\newcommand{\rtuple}[1]{(#1)}
\newcommand{\pair}{\tuple}
\newcommand{\rpair}{\rtuple}
\newcommand{\such}{\mid}                % in sets {x|...}
\newcommand{\imp}{\Rightarrow}
\renewcommand{\iff}{\Leftarrow\!\!\!\Rightarrow}
\newcommand{\id}{{\rm id}}
\newcommand{\cp}{\circ}
\newcommand{\sem}[2]{[\![#1]\!]_{#2}}   % semantic brackets
\newcommand{\semm}[1]{\sem{#1}{}}

% Propositional logic
\newcommand{\cde}[1]{\textrm{\rm\boldmath $#1$}}
\newcommand{\cnot}{\mathop{\cde{\neg}}}
\newcommand{\cand}{\mathbin{\cde{\wedge}}}
\newcommand{\cor}{\mathbin{\cde{\vee}}}
\newcommand{\ctop}{\cde{\top}}
\newcommand{\cbot}{\cde{\bot}}
\newcommand{\ctrue}{\ctop}
\newcommand{\cfalse}{\cbot}

% BNF
\newcommand{\bnf}{::=}                  % ::= in bnf
\newcommand{\bor}{\ \ \rule[-.75ex]{.01in}{2.75ex}\ \ }     % | in bnf

% Spacing
\newcommand{\sep}{\hspace{2em}}
\newcommand{\ssep}{\hspace{1em}}
\newcommand{\sssep}{\hspace{.35em}}
\newcommand{\nl}{\\[2ex]}               % spaced-out newline in table

% Prettier symbols
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}
\renewcommand{\phi}{\varphi}

% Combinatory logic
\newcommand{\app}{\cdot}
\newcommand{\K}{{\bf K}}                % syntactic K
\renewcommand{\S}{{\bf S}}              % syntactic S
\newcommand{\one}{{\bf 1}}              % 1=S(KI)
\newcommand{\CTerm}{{\mathfrak C}}      % Combinatory terms

% Letter-like symbols
\newcommand{\Bb}{{\bf B}}
\newcommand{\Nn}{{\bf N}}
\newcommand{\sG}{{\cal G}}
\newcommand{\N}{\mathbb{N}}             % Nat'l numbers AMS fonts
\newcommand{\Aa}{{\bf A}}
\newcommand{\fC}{\mathfrak{C}}
\newcommand{\abar}{\bar a}
\newcommand{\sigmabar}{\bar{\sigma}}
\newcommand{\taubar}{\bar{\tau}}
\newcommand{\kappabar}{\bar{\kappa}}
\newcommand{\rhobar}{\bar{\rho}}
\newcommand{\phihat}{\hat\phi}

% Directed supremum
\newcommand{\dirsup}{\mathop{\setlength{\unitlength}{.7em}\raisebox{-.2em}%
    {\begin{picture}(1,1.5)\put(.5,0){\line(-1,3){.48}}
    \put(.5,0){\vector(1,3){.5}}\end{picture}}}}

% Substitution
\newcommand{\ren}[3]{#1\{#2/#3\}}
\newcommand{\subst}[3]{#1[#2/#3]}
\newcommand{\tsubst}[1]{[#1]}

% Names of typing rules
\newcommand{\tjunit}{\nrule{*}}
\newcommand{\tjproja}{\nrule{\pi_1}}
\newcommand{\tjprojb}{\nrule{\pi_2}}
\newcommand{\tjpair}{\trule{pair}}
\newcommand{\tjvar}{\trule{var}}
\newcommand{\tjlam}{\trule{abs}}
\newcommand{\tjapp}{\trule{app}}
\newcommand{\tjLam}{\trule{typeabs}}
\newcommand{\tjApp}{\trule{typeapp}}
\newcommand{\tjinja}{\trule{in$_1$}}
\newcommand{\tjinjb}{\trule{in$_2$}}
\newcommand{\tjcase}{\trule{case}}
\newcommand{\tjbox}{\nrule{\Box}}

% Names of equations
\newcommand{\eqna}{({\it a}\/)}
\newcommand{\eqnb}{({\it b}\/)}
\newcommand{\eqnc}{({\it c}\/)}
\newcommand{\eqnd}{({\it d}\/)}
\newcommand{\eqne}{({\it e}\/)}
\newcommand{\eqnf}{({\it f}\/)}
\newcommand{\eqng}{({\it g}\/)}
\newcommand{\eqnh}{({\it h}\/)}
\newcommand{\eqni}{({\it i}\/)}

% Miscellaneous macros
\newcommand{\evto}{\Downarrow}
\newcommand{\numn}{\underline{n}}
\newcommand{\fix}[1]{#1^{\dagger}}
\newcommand{\ul}{\underline}
\newcommand{\chnum}[1]{\mathop{\overline{#1}}}
\newcommand{\tri}{\mathrel{\triangleright}}
\newcommand{\syntaxeq}{\equiv}
\newcommand{\Vars}{{\cal V}}
\newcommand{\lam}{\lambda}
\newcommand{\typ}[2]{#1{:}#2}
\newcommand{\lamabs}[2]{\lam#1^{#2}}
\newcommand{\Lamabs}[1]{\Lambda#1}
\newcommand{\proj}{\pi_}
\newcommand{\inj}{\mbox{\rm in}_}
\newcommand{\caseof}[7]{\mathop{\mbox{\rm case}}#1\mathop{\mbox{\rm
      of}}#2^#3\Rightarrow#4\mathop{|}#5^#6\Rightarrow#7}
\newcommand{\unit}{{*}}
\newcommand{\tj}{\vdash}
\newcommand{\FV}[1]{FV(#1)}
\newcommand{\FTV}[1]{FTV(#1)}
\newcommand{\trule}[1]{\textrm{(\textit{#1\/})}} % name of a rule like (text)
\newcommand{\nrule}[1]{\trule{$#1$}}             % name of a rule like (\xi_1)
\newcommand{\derivstrut}{\rule[-.5ex]{0mm}{2.5ex}} % spacing in \deriv
\newcommand{\deriv}[2]{\mbox{$\frac{\derivstrut\mbox{$#1$}}{\mbox{\derivstrut$#2$}}$}}
\newcommand{\ideriv}[2]{\mbox{$\begin{array}[b]{c}#1\\\vdots\\#2\end{array}$}}
\newcommand{\squishr}[1]{\makebox[0in][r]{#1}}
\newcommand{\wloss}{without loss of generality}
\newcommand{\void}[1]{}
