
\begin{tikzpicture}[node distance=10mm]

\draw[draw=none,fill=col5!20] (-0.5, 2.35) rectangle (3.5, -3.6);
\draw[draw=none,fill=col6!20] ( 3.5, -1.3) rectangle (7, -3.6);

\node[scale=1,anchor=center,color=gray] (times_txt) at (3.25, -3.40) {compile time / runtime\phantom{p}};
\node[scale=1,anchor=north,align=center,color=gray] (ext_txt) at (3.15, -3.6) {extended LLVM parts};

\node[scale=1.0] (app_source) at (-1.7, 0.0) {\Huge\faIcon[regular]{copy}};
\node[scale=1.0,text width=20mm,anchor=north] (app_source_txt) at ($(app_source.south) + (0.3,0.0)$) {legacy CPU app. source};

\node[scale=1.0] (main_wrapper) at (0.5, 1.5) {\Huge\faIcon[regular]{file-code}};
\node[scale=1.0,anchor=south,yshift=-1mm] (main_wrapper_text) at (main_wrapper.north) {main wrapper};

\node[scale=1.0] (user_wrapper) at (2.5, 1.5) {\Huge\faIcon[regular]{file-code}};
\node[scale=1.0,anchor=south,yshift=-1mm] (user_wrapper_text) at (user_wrapper.north) {user wrapper};

\node[scale=1.3] (compiler) at (1.5, 0.0) {\Huge\faIcon[solid]{tools}};
\node[scale=1.0,text width=3.1cm, anchor=north] (compiler_text) at (compiler.south) {Clang with custom link-time-optimizations};

\node[scale=1.0] (libc) at (1.5, -2.3) {\Huge\faIcon[regular]{file-code}};
\node[scale=1.0,anchor=north] (libc_text) at (libc.south) {partial libc};

\node[scale=1.0] (executable) at (4.3, 0.0) {\Huge\faIcon[regular]{save}};
\node[scale=1.0,anchor=north] (executable_txt) at (executable.south) {exec.};

\node[scale=1.0] (gpu) at (6.1, 0.0) {\Huge\faIcon[regular]{hdd}};
\node[scale=1.0,anchor=north,yshift=-0.8mm] (gpu_txt) at (gpu.south) {GPU};

\node[scale=1.0] (libomptarget) at (4.3, -2.3) {\Huge\faIcon[regular]{file-code}};
\node[scale=1.0,anchor=north] (libomptarget_text) at (libomptarget.south) {offload lib.};

\node[scale=1.0] (rpc) at (6.1, -2.3) {\Huge\faIcon[regular]{hourglass}};
\node[scale=1.0,anchor=north] (rpc_txt) at (rpc.south) {RPC thread};

\draw[line width=2.0pt, ->] ($(app_source.east) + (0.2, 0.0)$) -- ($(compiler.west) + (-0.2, 0)$);
\draw[line width=2.0pt, ->] ($(compiler.east) + (0.2, 0.0)$) -- ($(executable.west) + (-0.2, 0)$);
\draw[line width=2.0pt, ->] ($(executable.east) + (0.2, 0.0)$) -- ($(gpu.west) + (-0.2, 0)$);
\draw[line width=2.0pt, ->] ($(main_wrapper.south) + (0.0, 0.0)$) -- ($(compiler.north west) + (0.0, 0.0)$);
\draw[line width=2.0pt, ->] ($(user_wrapper.south) + (0.0, 0.0)$) -- ($(compiler.north east) + (0.0, 0.0)$);
\draw[line width=2.0pt, ->] ($(libc.north) + (0.0, 0.0)$) -- ($(compiler_text.south) + (0.0, 0.0)$);
\draw[line width=2.0pt, dotted, <->] ($(libomptarget.east) + (0.2,-0.1)$) -- ($(rpc.west) + (-0.2,-0.1)$);
\draw[line width=2.0pt, <->] ($(rpc.north) + (0.0, 0.0)$) -- ($(gpu_txt.south) + (0.0, 0.0)$);
\draw[line width=2.0pt, <->] ($(libomptarget.north) + (0.0, 0.0)$) -- ($(executable_txt.south) + (0.0, 0.0)$);

\end{tikzpicture}
