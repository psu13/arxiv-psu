
\begin{tikzpicture}[node distance=10mm]

%\node[scale=2.0] (inp) at (1.0, 2.5) {\huge\faFileCode[regular]{}};
%\node[scale=1.5, yshift=-3mm, align=center, text width=20mm] (inp_txt) at (inp.south) {legacy CPU application};
%
%\node[scale=1.5, rounded corners, draw=black, ultra thick] (clang) at (5, 2.5) {LLVM/Clang};

\draw[fill=col1!20]
    (0.0, 0.0) rectangle (6.0, -5.0);
\draw[fill=col2!20]
    (6.0, 0.0) rectangle (10.0, -5.0);
\draw[pattern={grid},pattern color=gray!40,draw=black,dotted]
    (0.0, 0.0) -- (0.0, -1.175) -- (6.0, -5.0) -- (10, -5) -- (10, 0) -- (0,0);

%\draw[pattern={Dots[radius=1.8pt,distance=4pt]},pattern color=gray!30,draw=black]
%    (6.0, 0.0) rectangle (10.0, -5.0);
\node[scale=1.5, anchor=south, rotate=90] (CPU_txt) at (0, -2.5) {CPU execution};
\node[scale=1.5, anchor=north, rotate=90] (GPU_txt) at (10, -2.5) {GPU execution};

\node[scale=2.0] (loader) at (2.0, -0.8) {\huge\faFile[regular]{}};
\node[scale=0.8,yshift=-2mm] (loader_gears) at (loader) {\huge\faCogs{}};
\node[scale=1.5,yshift=-0.5mm] (loader_txt) at (loader.south) {loader};

\node[scale=2.0] (rpc_host) at (4.7, -2.25) {\huge\faFile[regular]{}};
\node[scale=0.8,yshift=-2mm] (rpc_host_gears) at (rpc_host) {\huge\faCogs{}};
\node[scale=1.5,yshift=-0.5mm] (rpc_host_txt) at (rpc_host.south) {RPC server};

\node[scale=2.0] (library) at (2.0, -3.8) {\huge\faFileArchive[regular]{}};
\node[scale=1.5,yshift=-0.5mm] (library_txt) at (library.south) {system libraries};

\node[scale=2.0] (app) at (8.0, -1.0) {\huge\faFile[regular]{}};
\node[scale=0.8,yshift=-2mm] (device_exe_gears) at (app) {\huge\faCogs{}};
\node[scale=1.5,yshift=-0.5mm] (app_txt) at (app.south) {app exec.};

\node[scale=2.0] (gpu_library) at (8.0, -3.8) {\huge\faFileArchive[regular]{}};
\node[scale=1.5,yshift=-0.5mm] (gpu_library_txt) at (gpu_library.south) {partial GPU libc};

\ExtractCoordinateA{loader.east}
\ExtractCoordinateB{app.west}
\draw[line width=3.5pt, ->] ($(\XCoordA, \YCoordB) + (0, 0.0)$) -- ($(app.west) + (0, 0)$);
\draw[line width=3.5pt, ->] ($(loader.north) + (0, 0.5)$) -- ($(loader.north) + (0, -0.2)$);
\draw[line width=2.0pt, <->] ($(app.west) + (0, -0.2)$) -- ($(rpc_host.east) + (0, 0)$);
%\draw[line width=2.0pt, <-] ($(app.west) + (0, -0.2)$) -- ($(rpc_host.east) + (0, 0)$);
\draw[line width=2.0pt, <->] ($(app_txt.south) + (0, 0.15)$) -- ($(gpu_library.north) + (0, -0.15)$);

\ExtractCoordinateA{rpc_host.west}
\ExtractCoordinateB{library.north}
\draw[line width=2.0pt, <->] ($(rpc_host.west) + (0, -0.2)$) -- ($(\XCoordB, \YCoordA) + (0, -0.2)$) -- ($(library.north) + (0, -0.15)$);

\end{tikzpicture}