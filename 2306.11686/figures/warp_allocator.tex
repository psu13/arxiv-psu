\newcommand{\WAEntry}[4]{%
\draw[fill=#3] 
      ($(#1, 4) + (0,0)$) rectangle ($(#1, 0)+ (4,0)$);
\draw[fill=#3, #4] 
      ($(#1, 4) + (4,0)$) rectangle ($(#2, 0)+ (0,0)$);
\draw[line width=2.5pt] ($(#1, 4) + (0,0)$) -- ($(#1, 0) + (0, 0)$);
\draw[dashed] ($(#1, 4) + (2,0)$) -- ($(#1, 0)+ (2,0)$);
\draw[] ($(#1, 4) + (4,0)$) -- ($(#1, 0)+ (4,0)$);
\draw[line width=2.5pt] ($(#2, 4) + (0,0)$) -- ($(#2, 0)+ (0,0)$);
}
\newcommand{\WALinkFwd}[3]{%
\draw[line width=13pt,white] ($(#1, 5) + (3, 0)$) -- ($(#2, 5) + (-0.2, 0)$);
\draw[line width=5pt,->] ($(#1, 2) + (3,0)$) -- ($(#1, 5) + (3, 0)$) -- ($(#2, 5) + (0, 0)$) -- ($(#2, 4) + (0, 0.1)$);
}
\newcommand{\WALink}[3]{%
\WALinkFwd{#1}{#2}{#3}
\draw[line width=13pt,white] ($(#2, 5.5) + (1, #3)$) -- ($(#1, 5.5) + (0.2, #3)$);
\draw[line width=5pt,->] ($(#2, 2) + (1,0)$) -- ($(#2, 5.5) + (1, #3)$) -- ($(#1, 5.5) + (0, #3)$) -- ($(#1, 4) + (0, 0.1)$);
}

\begin{tikzpicture}[node distance=10mm]

\draw[] (0, 4) -- (40, 4);
\draw[] (0, 0) -- (40, 0);
\WAEntry{4}{14}{col1!30}{postaction={pattern color=gray, pattern=crosshatch}}
\WAEntry{14}{23}{col2!30}{postaction={pattern color=gray, pattern=crosshatch}}
\WAEntry{24}{38}{col3!30}{postaction={pattern color=gray, pattern=crosshatch}}
\WALink{14}{24}{1}
\WALink{4}{14}{0}
\WALinkFwd{24}{38}{0}
\node[scale=1.4,anchor=north, rotate=90] at (23, 2) {\Huge\textbf{padding}};
\draw[line width=4.5, <-|,dashed] (4, 0) -- (4, -1) -- (6, -1) node[scale=2.0, anchor=west, yshift=1.5pt] {\Huge{bottom}};
\draw[line width=4.5, <-|,dashed] (38, 0) -- (38, -1) -- (36, -1) node[scale=2.0, anchor=east, yshift=-1.5pt] {\Huge{top}};

\tikzset{shift={(0,-9)}}

\draw[] (0, 4) -- (40, 4);
\draw[] (0, 0) -- (40, 0);
\WAEntry{4}{14}{col1!30}{postaction={pattern color=gray, pattern=crosshatch}}
\WAEntry{14}{23}{col2!30}{}
\WAEntry{24}{38}{col3!30}{postaction={pattern color=gray, pattern=crosshatch}}
\WALink{14}{24}{1}
\WALink{4}{14}{0}
\WALinkFwd{24}{38}{0}
\node[scale=1.4,anchor=north, rotate=90] at (23, 2) {\Huge\textbf{padding}};
\draw[line width=4.5, <-|,dashed] (4, 0) -- (4, -1) -- (6, -1) node[scale=2.0, anchor=west, yshift=1.5pt] {\Huge{bottom}};
\draw[line width=4.5, <-|,dashed] (38, 0) -- (38, -1) -- (36, -1) node[scale=2.0, anchor=east, yshift=-1.5pt] {\Huge{top}};

\tikzset{shift={(0,-9)}}

\draw[] (0, 4) -- (40, 4);
\draw[] (0, 0) -- (40, 0);
\WAEntry{4}{14}{col1!30}{postaction={pattern color=gray, pattern=crosshatch}}
\WALinkFwd{4}{14}{0}

\draw[line width=4.5, <-|,dashed] (4, 0) -- (4, -1) -- (6, -1) node[scale=2.0, anchor=west, yshift=1.5pt] {\Huge{bottom}};
\draw[line width=4.5, <-|,dashed] (14, 0) -- (14, -1) -- (16, -1) node[scale=2.0, anchor=west, yshift=-1.5pt] {\Huge{top}};

\tikzset{shift={(0,-3)}}

\draw[line width=4.5, <-|] (0,0) -- (0.5, 0) node[scale=2.0, anchor=north west] {\Huge{previous heap }} -- (4,0);
\draw[line width=4.5, |->] (14, 0) -- (38,0) node[scale=2.0, anchor=north east] {\Huge{free heap space, then next heap}} -- (40,0);

\end{tikzpicture}
